(()=>{"use strict";let t;let e="PAComponent",a="PAInterval",s="PACount",i="PAPathAxis",n="PANormalAxis",r="PAScale",o="PAPathList";function l(t){return"X"===t||"Y"===t||"Z"===t}let h={interval:{value:1e3,min:10,max:9999999},count:{value:10,min:1,max:100},pathAxis:"X",normalAxis:"Z",scale:{value:1,min:.01,max:1e3}};GeomLib.createIdentityMatrix4();let c=GeomLib.createVector3d(0,0,1),p=GeomLib.createPoint3d(0,0,0);function u(t){return t.getType()===KEntityType.GroupInstance}function m(t){return t.getType()===KEntityType.Face}function d(t,e){let a=e.getStartVertex(),s=e.getStartVertex();return a.getKey()===t.getKey()?{connected:!0,reversed:!1}:s.getKey()===t.getKey()?{connected:!0,reversed:!0}:{connected:!1,reversed:!1}}function g(t){let e;let a=[],s=0,i=c;for(let n=0;n<t.length;n++){let r=t[n],o=function(t){let e=t.getBoundedCurve(),a=[];return e&&(e.direction?a=[e.startPoint,e.endPoint]:e.circle&&(a=e.getApproximatePointsByAngle())),a}(r.curve);if(o.length){let t=function(t){let e=t.getBoundedCurve();if(e&&e.circle)return e.normal}(r.curve)||e;e=t,t&&(i=t);for(let e=0;e<o.length;e++){let i=o[e];if(0===e){if(0===n){let t=o[e+1];a.push({point:o[0],direction:t.subtracted(i).normalized(),accumulateLength:s})}}else{let n=o[e-1],r=i.subtracted(n).normalized();s+=n.distanceTo(i),a.push({point:i,direction:r,normal:t,accumulateLength:s})}}}}for(let t of a){if(t.normal)break;t.normal=i}return{pathPointPoses:a,totalLength:s}}function v(t,e){let{count:a,interval:s,scale:i}=e,n=[],r=GeomLib.createScaleMatrix4(i.value,i.value,i.value),o=0,l=0*s.value;for(let e=0;e<t.length;e++){let i;let{point:h,normal:u,direction:m,accumulateLength:d}=t[e],g=0===e?-1:t[e-1].accumulateLength,v=u||c;for(;o<a.value&&l>g&&l<=d;){let t=h.added(m.multiplied(l-d));i=GeomLib.createTranslationMatrix4(t.x,t.y,t.z).multiplied(GeomLib.createAlignCCSMatrix4(m,v.cross(m).normalized(),v,p)).multiplied(r),n.push(i),l=++o*s.value}}return n}var P=function(t,e,a,s){return new(a||(a=Promise))(function(i,n){function r(t){try{l(s.next(t))}catch(t){n(t)}}function o(t){try{l(s.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,o)}l((s=s.apply(t,e||[])).next())})};let y=app.getActiveDesign(),f=new class{constructor(){this.components=[],this.path=[],this.pathPointPoses=[],this.totalLength=0,this.pathArrayParams=h}getPathArrayParams(){return this.pathArrayParams}setModel(t){var h;let c=null===(h=t.getGroupDefinition())||void 0===h?void 0:h.getSubGroupInstances().reduce((t,a)=>{let s=Number.parseInt(a.getCustomProperty(e));return Number.isFinite(s)&&t.push({instance:a,index:s}),t},[]).sort((t,e)=>t.index-e.index);if(null==c?void 0:c.length){let e=Number.parseInt(t.getCustomProperty(s)),h=t.getCustomProperty(a),p=h.startsWith("m"),u=p?Number.parseFloat(h.slice(1)):Number.parseFloat(h),m=t.getCustomProperty(i),d=t.getCustomProperty(n),v=t.getCustomProperty(r),P=v.startsWith("m"),y=P?Number.parseFloat(v.slice(1)):Number.parseFloat(v);if(Number.isFinite(e)&&e>1&&Number.isFinite(u)&&Number.isFinite(y)&&l(m)&&l(d)){let a=t.getCustomProperty(o),s=new Map,i=!0,n=[];for(let t of a.split("&")){let e=t.split("-");if(2===e.length){let t=s.get(e[0]);t&&n.push({curve:t,reversed:"1"===e[1]})}i=!1;break}if(i&&n.length){this.model=t,this.components=c,this.path=n;let{pathPointPoses:a,totalLength:s}=this.pathPointPoses.length?{pathPointPoses:this.pathPointPoses,totalLength:this.totalLength}:g(this.path);return this.pathPointPoses=a,this.totalLength=s,this.pathArrayParams={interval:{value:u,min:10,max:s/e},intervalLocked:p,count:{value:e,min:1,max:Math.floor(s/u)},pathAxis:m,normalAxis:d,scale:{value:y,min:.01,max:1e3},scaleLocked:P},!0}}}return!1}clearModel(){this.model=void 0,this.path=[],this.components=[],this.pathPointPoses=[],this.totalLength=0,this.pathArrayParams=h}doOperation(t,a=!0){var s;return P(this,void 0,void 0,function*(){if(!this.model)return!1;let{pathPointPoses:i,totalLength:n}=this.pathPointPoses.length?{pathPointPoses:this.pathPointPoses,totalLength:this.totalLength}:g(this.path);this.pathPointPoses=i,this.totalLength=n;let r=v(i,t),o=(yield y.activateGroupInstance(this.model)).isSuccess;if(a)for(let t of this.components){let e=t.instance.getTransform(),a=t.instance.getLocalBoundingBox().center,s=GeomLib.createTranslationMatrix4(-a.x,-a.y,-a.z).multiplied(e.inversed());if(!y.transformGroupInstances([t.instance],r[t.index].multiplied(s)).isSuccess){o=!1;break}}if(t.count>this.pathArrayParams.count){let a=this.components[0].instance,i=a.getTransform(),n=a.getLocalBoundingBox().center,l=GeomLib.createTranslationMatrix4(-n.x,-n.y,-n.z).multiplied(i.inversed()),h=null===(s=y.bulkCopyGroupInstances([a],[r.slice(this.pathArrayParams.count.value).map(t=>t.multiplied(l))]))||void 0===s?void 0:s.addedInstances;if(null==h?void 0:h.length){for(let a=this.pathArrayParams.count.value;a<t.count.value;a++)o=o&&h[a-this.pathArrayParams.count.value].setCustomProperty(e,`${a}`).isSuccess;o&&(this.components=[...this.components,...h.map((t,e)=>({instance:t,index:this.pathArrayParams.count.value+e}))])}else o=!1}else{let e=this.components.findIndex(e=>e.index===t.count.value);for(let t of this.components.slice(e))o=o&&y.removeGroupInstance(t.instance).isSuccess;o&&this.components.splice(e,this.components.length-e+1)}return o&&(yield y.deactivateGroupInstance()).isSuccess})}updateInterval(t){return P(this,void 0,void 0,function*(){if(this.model&&this.components.length&&this.path.length&&this.pathArrayParams&&t!==this.pathArrayParams.interval.value){let{scale:e,count:s,scaleLocked:i}=this.pathArrayParams,n=this.components[0].instance.getLocalBoundingBox(),o=t*s.value>this.totalLength?Math.floor(this.totalLength/t):s.value,l=i?e.value:n.width>t/2?t/2/n.width:e.value;y.startOperation();let h=Object.assign(Object.assign({},this.pathArrayParams),{interval:{value:t,min:10,max:this.totalLength/o},count:{value:o,min:1,max:Math.floor(this.totalLength/t)},scale:Object.assign(Object.assign({},e),{value:l})}),c=yield this.doOperation(h);return c?(y.commitOperation(),this.model.setCustomProperty(a,`${t}`),i||l===e.value||this.model.setCustomProperty(r,`${l}`),this.pathArrayParams=h):y.abortOperation(),c}})}updateCount(t){return P(this,void 0,void 0,function*(){if(this.model&&this.components.length&&this.path.length&&this.pathArrayParams&&t!==this.pathArrayParams.count.value){let{interval:s,intervalLocked:i,count:n,scale:o,scaleLocked:l}=this.pathArrayParams,h=this.pathPointPoses.length?this.totalLength:g(this.path).totalLength;this.totalLength=h;let c=this.components[0].instance.getLocalBoundingBox(),p=t>n.value&&this.totalLength>s.value*t||t<n.value&&!i,u=p?this.totalLength/t:s.value,m=p||!l&&c.width>u/2,d=m?u/2/c.width:o.value;y.startOperation();let v=Object.assign(Object.assign({},this.pathArrayParams),{interval:{value:u,min:10,max:h/t},count:Object.assign(Object.assign({},this.pathArrayParams.count),{value:t}),scale:Object.assign(Object.assign({},this.pathArrayParams.scale),{value:d})}),P=yield this.doOperation(v,p||m);return P?(y.commitOperation(),this.model.setCustomProperty(e,`${t}`),p&&this.model.setCustomProperty(a,`${u}`),m&&this.model.setCustomProperty(r,`${d}`),this.pathArrayParams=v):y.abortOperation(),P}})}updatePathAxis(t){}updateNormalAxis(t){}updateScale(t){return P(this,void 0,void 0,function*(){if(this.model&&this.components.length&&this.path.length&&this.pathArrayParams&&t!==this.pathArrayParams.scale.value){y.startOperation();let e=Object.assign(Object.assign({},this.pathArrayParams),{scale:Object.assign(Object.assign({},this.pathArrayParams.scale),{value:t})}),a=yield this.doOperation(e);return a?(y.commitOperation(),this.model.setCustomProperty(r,`${t}`),this.pathArrayParams=e):y.abortOperation(),a}})}onToolActive(){}onToolDeactive(){}onMouseMove(t,e){}onLButtonUp(t,e){}onRButtonUp(t,e){app.deactivateCustomTool(this)}onLButtonDbClick(t,e){}allowUsingInference(){return!1}onKeyDown(t){}onKeyUp(t){}},A=new class{constructor(){this.path=[],this.pathPointPoses=[],this.totalLength=0,this.pathArrayParams=h}onToolActive(){let t=app.getSelection(),e=app.getToolHelper();e.enablePicking(!0),e.setDefaultSelectBehavior(KSelectBehavior.ADD);let a=t.getAllEntities();1===a.length&&(u(a[0])||m(a[0]))?this.model=a[0]:t.clear()}onToolDeactive(){let t=app.getPluginUI();this.tryCommit(),t.postMessage({type:"leavePathArrayTool"},"*")}onMouseMove(t,e){}onLButtonUp(t,e){let a=app.getSelection(),s=app.getPickHelper().pickByPoint(t.clientX(),t.clientY()).getAllPicked();if(s.length){if(this.model){let t=!1;if(s[0].getType()===KEntityType.AuxiliaryBoundedCurve){let e=s[0];if(this.path.length){let a;let s=this.path[this.path.length-1],i=s.reversed?s.curve.getStartVertex():s.curve.getEndVertex();1===this.path.length?!(a=d(i,e)).connected&&(a=d(i=s.curve.getStartVertex(),e)).connected&&(s.reversed=!s.reversed):a=d(i,e),a.connected&&(this.path.push({curve:e,reversed:a.reversed}),t=!0)}else this.path.push({curve:e,reversed:!1}),t=!0}t?a.remove(s.slice(1)):a.remove(s)}else this.model=s[0]}else this.tryCommit()}tryCommit(){var t,l,h;if(this.model&&this.path.length){let c;let p=app.getActiveDesign();if(p.startOperation(),u(this.model)?c=this.model:m(this.model)&&(c=null===(t=p.makeGroup([this.model],[],[]))||void 0===t?void 0:t.addedInstance),c){let{pathPointPoses:t,totalLength:u}=this.pathPointPoses.length?{pathPointPoses:this.pathPointPoses,totalLength:this.totalLength}:g(this.path);this.pathPointPoses=t,this.totalLength=u;let m=[c],d=u/(this.pathArrayParams.count.value-1),P=function(t){let e=t.getLocalBoundingBox(),a=t.getTransform();return[GeomLib.createVector3d(e.width,0,0),GeomLib.createVector3d(0,e.height,0),GeomLib.createVector3d(0,0,e.depth)].map(t=>t.appliedMatrix4(a).length)}(c),y=P[0]>d/2?d/2/P[0]:1,f=c.getLocalBoundingBox(),A=c.getTransform(),b=f.center,x=GeomLib.createTranslationMatrix4(-b.x,-b.y,-b.z).multiplied(A.inversed()),C=Object.assign(Object.assign({},this.pathArrayParams),{interval:Object.assign(Object.assign({},this.pathArrayParams.interval),{value:d}),scale:Object.assign(Object.assign({},this.pathArrayParams.scale),{value:y})}),L=v(this.pathPointPoses,C),O=p.transformGroupInstances([c],L[0].multiplied(x)).isSuccess;if(O){let t=L[0].inversed(),u=null===(l=p.bulkCopyGroupInstances([c],[L.slice(1).map(e=>e.multiplied(t))]))||void 0===l?void 0:l.addedInstances;if(null==u?void 0:u.length){m.push(...u);for(let t=0;t<m.length;t++)O=O&&m[t].setCustomProperty(e,`${t}`).isSuccess;let t=null===(h=p.makeGroup([],m,this.path.map(t=>t.curve)))||void 0===h?void 0:h.addedInstance;if(t){let e=this.path.length;O=(O=(O=(O=(O=(O=O&&t.setCustomProperty(a,`${d}`).isSuccess)&&t.setCustomProperty(s,`${this.pathArrayParams.count.value}`).isSuccess)&&t.setCustomProperty(i,`${this.pathArrayParams.pathAxis}`).isSuccess)&&t.setCustomProperty(n,`${this.pathArrayParams.normalAxis}`).isSuccess)&&t.setCustomProperty(r,`${y}`).isSuccess)&&t.setCustomProperty(o,this.path.reduce((t,a,s)=>(t+=`${a.curve.getKey()}-${a.reversed?1:0}`,s<e-1&&(t+="&"),t),"")).isSuccess;let l=app.getSelection();l.clear(),l.add([t]),O?(this.pathArrayParams=C,p.commitOperation()):p.abortOperation()}else p.abortOperation()}else p.abortOperation()}app.deactivateCustomTool(this,!1)}else p.abortOperation()}this.clear()}clear(){this.model=void 0,this.path=[],this.pathPointPoses=[],this.totalLength=0,this.pathArrayParams=Object.assign(Object.assign({},h),{count:this.pathArrayParams.count})}onRButtonUp(t,e){app.deactivateCustomTool(this)}onLButtonDbClick(t,e){}allowUsingInference(){return!1}onKeyDown(t){}onKeyUp(t){}},b=app.getPluginUI();b.resize(240,700),b.mount(),b.onMessage(function(e){var a,s,i,n;return a=this,s=void 0,i=void 0,n=function*(){try{if("activatePathArray"===e.type)app.activateCustomTool(A,!1),t=A;else if("deActivatePathArray"===e.type)app.deactivateCustomTool(A),t=void 0;else if("pathArrayParamsChange"===e.type){let a;t!==f&&(app.activateCustomTool(f,!1),t=f);let s=e.value;"intervalChange"===e.subtype?a=yield f.updateInterval(s):"countChange"===e.type?a=yield f.updateCount(s):"scaleChange"===e.type&&(a=yield f.updateScale(s)),a&&b.postMessage({type:"pathArrayParamsChanged",pathArrayParams:f.getPathArrayParams()})}}catch(t){console.error(t),closePlugin()}},new(i||(i=Promise))(function(t,e){function r(t){try{l(n.next(t))}catch(t){e(t)}}function o(t){try{l(n.throw(t))}catch(t){e(t)}}function l(e){var a;e.done?t(e.value):((a=e.value)instanceof i?a:new i(function(t){t(a)})).then(r,o)}l((n=n.apply(a,s||[])).next())})});let x=app.getSelection();x.addObserver({onSelectionChange:()=>{let t=x.getAllEntities();1===t.length&&u(t[0])&&f.setModel(t[0])&&b.postMessage({type:"pathArrayParamsChanged",pathArrayParams:f.getPathArrayParams()})}})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxNQUpUOUYsQ0FJYThGLENBQUFBLEVBQU9DLElBQUksQ0FBR1IsRUFBUU8sRUFBTzlGLEtBQUssRUFBSWdHLENBSm5DaEcsQ0FBaEJBLEVBSXlEOEYsRUFBTzlGLEtBQUssWUFKcENvRixFQUFJcEYsRUFBUSxJQUFJb0YsRUFBRSxTQUFVRyxDQUFPLEVBQUlBLEVBQVF2RixFQUFRLEVBQUMsRUFJbEJpRyxJQUFJLENBQUNSLEVBQVdJLEVBQVcsQ0FDN0dILEVBQUssQ0FBQ0wsRUFBWUEsRUFBVWEsS0FBSyxDQUFDaEIsRUFBU0MsR0FBYyxFQUFFLEdBQUdRLElBQUksR0FDdEUsRUE4Q0osR0FFQSxJQUFNaUgsRUFBWXhHLElBQUl5RyxZQUFZLEdBQ2xDRCxFQUFVNEQsV0FBVyxDQUFDLENBQ2xCQyxrQkFBbUIsS0FDZixJQUFNckQsRUFBY1IsRUFBVVMsY0FBYyxFQUNqQixLQUF2QkQsRUFBWWhMLE1BQU0sRUFBVXZCLEVBQWlCdU0sQ0FBVyxDQUFDLEVBQUUsR0FDbEM5RyxFQUF3QkssUUFBUSxDQUFDeUcsQ0FBVyxDQUFDLEVBQUUsR0FFcEVHLEVBQVNHLFdBQVcsQ0FBQyxDQUFFQyxLQUFNLHlCQUEwQmxILGdCQUFpQkgsRUFBd0JJLGtCQUFrQixFQUFHLEVBR2pJLENBQ0osRSIsInNvdXJjZXMiOlsid2VicGFjazovL3BhdGgtYXJyYXktdG9vbC8uL3NyYy9tYWluL21haW4udHMiLCJ3ZWJwYWNrOi8vcGF0aC1hcnJheS10b29sLy4vc3JjL21haW4vdHlwZXMudHMiLCJ3ZWJwYWNrOi8vcGF0aC1hcnJheS10b29sLy4vc3JjL21haW4vdXRpbHMudHMiLCJ3ZWJwYWNrOi8vcGF0aC1hcnJheS10b29sLy4vc3JjL21haW4vUGF0aEFycmF5UGFyYW1zRWRpdFRvb2wudHMiLCJ3ZWJwYWNrOi8vcGF0aC1hcnJheS10b29sLy4vc3JjL21haW4vUGF0aEFycmF5VG9vbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbmltcG9ydCB7IHBhdGhBcnJheVBhcmFtc0VkaXRUb29sIH0gZnJvbSBcIi4vUGF0aEFycmF5UGFyYW1zRWRpdFRvb2xcIjtcclxuaW1wb3J0IHsgcGF0aEFycmF5VG9vbCB9IGZyb20gXCIuL1BhdGhBcnJheVRvb2xcIjtcclxuaW1wb3J0IHsgaXNLR3JvdXBJbnN0YW5jZSB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmNvbnN0IHBsdWdpblVJID0gYXBwLmdldFBsdWdpblVJKCk7XHJcbnBsdWdpblVJLnJlc2l6ZSgyNDAsIDcwMCk7XHJcbnBsdWdpblVJLm1vdW50KCk7XHJcbmxldCBhY3RpdmF0ZWRDdXN0b21Ub29sO1xyXG5mdW5jdGlvbiBvblVJTWVzc2FnZShkYXRhKSB7XHJcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdhY3RpdmF0ZVBhdGhBcnJheScpIHtcclxuICAgICAgICAgICAgICAgIGFwcC5hY3RpdmF0ZUN1c3RvbVRvb2wocGF0aEFycmF5VG9vbCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgYWN0aXZhdGVkQ3VzdG9tVG9vbCA9IHBhdGhBcnJheVRvb2w7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnZGVBY3RpdmF0ZVBhdGhBcnJheScpIHtcclxuICAgICAgICAgICAgICAgIGFwcC5kZWFjdGl2YXRlQ3VzdG9tVG9vbChwYXRoQXJyYXlUb29sKTtcclxuICAgICAgICAgICAgICAgIGFjdGl2YXRlZEN1c3RvbVRvb2wgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAncGF0aEFycmF5UGFyYW1zQ2hhbmdlJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2YXRlZEN1c3RvbVRvb2wgIT09IHBhdGhBcnJheVBhcmFtc0VkaXRUb29sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmFjdGl2YXRlQ3VzdG9tVG9vbChwYXRoQXJyYXlQYXJhbXNFZGl0VG9vbCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlZEN1c3RvbVRvb2wgPSBwYXRoQXJyYXlQYXJhbXNFZGl0VG9vbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJhbXNDaGFuZ2VSZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWJ0eXBlID09PSAnaW50ZXJ2YWxDaGFuZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zQ2hhbmdlUmVzdWx0ID0geWllbGQgcGF0aEFycmF5UGFyYW1zRWRpdFRvb2wudXBkYXRlSW50ZXJ2YWwodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY291bnRDaGFuZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zQ2hhbmdlUmVzdWx0ID0geWllbGQgcGF0aEFycmF5UGFyYW1zRWRpdFRvb2wudXBkYXRlQ291bnQodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc2NhbGVDaGFuZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zQ2hhbmdlUmVzdWx0ID0geWllbGQgcGF0aEFycmF5UGFyYW1zRWRpdFRvb2wudXBkYXRlU2NhbGUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtc0NoYW5nZVJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpblVJLnBvc3RNZXNzYWdlKHsgdHlwZTogJ3BhdGhBcnJheVBhcmFtc0NoYW5nZWQnLCBwYXRoQXJyYXlQYXJhbXM6IHBhdGhBcnJheVBhcmFtc0VkaXRUb29sLmdldFBhdGhBcnJheVBhcmFtcygpIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgY2xvc2VQbHVnaW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5wbHVnaW5VSS5vbk1lc3NhZ2Uob25VSU1lc3NhZ2UpO1xyXG5jb25zdCBzZWxlY3Rpb24gPSBhcHAuZ2V0U2VsZWN0aW9uKCk7XHJcbnNlbGVjdGlvbi5hZGRPYnNlcnZlcih7XHJcbiAgICBvblNlbGVjdGlvbkNoYW5nZTogKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFsbEVudGl0aWVzID0gc2VsZWN0aW9uLmdldEFsbEVudGl0aWVzKCk7XHJcbiAgICAgICAgaWYgKGFsbEVudGl0aWVzLmxlbmd0aCA9PT0gMSAmJiBpc0tHcm91cEluc3RhbmNlKGFsbEVudGl0aWVzWzBdKSkge1xyXG4gICAgICAgICAgICBjb25zdCBpc1BhdGhBcnJheU1vZGVsID0gcGF0aEFycmF5UGFyYW1zRWRpdFRvb2wuc2V0TW9kZWwoYWxsRW50aXRpZXNbMF0pO1xyXG4gICAgICAgICAgICBpZiAoaXNQYXRoQXJyYXlNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgcGx1Z2luVUkucG9zdE1lc3NhZ2UoeyB0eXBlOiAncGF0aEFycmF5UGFyYW1zQ2hhbmdlZCcsIHBhdGhBcnJheVBhcmFtczogcGF0aEFycmF5UGFyYW1zRWRpdFRvb2wuZ2V0UGF0aEFycmF5UGFyYW1zKCkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJleHBvcnQgY29uc3QgQ29tcG9uZW50UHJvcGVydHlLZXkgPSAnUEFDb21wb25lbnQnO1xyXG5leHBvcnQgY29uc3QgSW50ZXJ2YWxQcm9wZXJ0eUtleSA9ICdQQUludGVydmFsJztcclxuZXhwb3J0IGNvbnN0IENvdW50UHJvcGVydHlLZXkgPSAnUEFDb3VudCc7XHJcbmV4cG9ydCBjb25zdCBQYXRoQXhpc1Byb3BlcnR5S2V5ID0gJ1BBUGF0aEF4aXMnO1xyXG5leHBvcnQgY29uc3QgTm9ybWFsQXhpc1Byb3BlcnR5S2V5ID0gJ1BBTm9ybWFsQXhpcyc7XHJcbmV4cG9ydCBjb25zdCBTY2FsZVByb3BlcnR5S2V5ID0gJ1BBU2NhbGUnO1xyXG5leHBvcnQgY29uc3QgUGF0aExpc3RQcm9wZXJ0eUtleSA9ICdQQVBhdGhMaXN0JztcclxuZXhwb3J0IGNvbnN0IFBhdGhSZXZlcnNlZERlbGltaXRlciA9ICctJztcclxuZXhwb3J0IGNvbnN0IFBhdGhEZWxpbWl0ZXIgPSAnJic7XHJcbmV4cG9ydCBjb25zdCBNYW51YWxQcmVmaXggPSAnbSc7XHJcbmV4cG9ydCBmdW5jdGlvbiBpc0F4aXNWYWxpZChheGlzKSB7XHJcbiAgICByZXR1cm4gYXhpcyA9PT0gXCJYXCIgLyogQXhpcy5YICovIHx8IGF4aXMgPT09IFwiWVwiIC8qIEF4aXMuWSAqLyB8fCBheGlzID09PSBcIlpcIiAvKiBBeGlzLlogKi87XHJcbn1cclxuZXhwb3J0IGNvbnN0IERlZmF1bHRQYXRoQXJyYXlQYXJhbXMgPSB7XHJcbiAgICBpbnRlcnZhbDogeyB2YWx1ZTogMTAwMCwgbWluOiAxMCwgbWF4OiA5OTk5OTk5IH0sXHJcbiAgICBjb3VudDogeyB2YWx1ZTogMTAsIG1pbjogMSwgbWF4OiAxMDAgfSxcclxuICAgIHBhdGhBeGlzOiBcIlhcIiAvKiBBeGlzLlggKi8sXHJcbiAgICBub3JtYWxBeGlzOiBcIlpcIiAvKiBBeGlzLlogKi8sXHJcbiAgICBzY2FsZTogeyB2YWx1ZTogMSwgbWluOiAwLjAxLCBtYXg6IDEwMDAgfSxcclxufTtcclxuZXhwb3J0IGNvbnN0IGR1bW15TWF0cml4NCA9IEdlb21MaWIuY3JlYXRlSWRlbnRpdHlNYXRyaXg0KCk7XHJcbmV4cG9ydCBjb25zdCBkdW1teVZlY3RvcjNkID0gR2VvbUxpYi5jcmVhdGVWZWN0b3IzZCgwLCAwLCAxKTtcclxuZXhwb3J0IGNvbnN0IGR1bW15UG9pbnQzZCA9IEdlb21MaWIuY3JlYXRlUG9pbnQzZCgwLCAwLCAwKTtcclxuIiwiaW1wb3J0IHsgZHVtbXlQb2ludDNkLCBkdW1teVZlY3RvcjNkIH0gZnJvbSBcIi4vdHlwZXNcIjtcclxuZXhwb3J0IGZ1bmN0aW9uIGlzS0dyb3VwSW5zdGFuY2UoZW50aXR5KSB7XHJcbiAgICByZXR1cm4gZW50aXR5LmdldFR5cGUoKSA9PT0gS0VudGl0eVR5cGUuR3JvdXBJbnN0YW5jZTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gaXNLRmFjZShlbnRpdHkpIHtcclxuICAgIHJldHVybiBlbnRpdHkuZ2V0VHlwZSgpID09PSBLRW50aXR5VHlwZS5GYWNlO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBpc0tBdXhpbGlhcnlCb3VuZGVkQ3VydmUoZW50aXR5KSB7XHJcbiAgICByZXR1cm4gZW50aXR5LmdldFR5cGUoKSA9PT0gS0VudGl0eVR5cGUuQXV4aWxpYXJ5Qm91bmRlZEN1cnZlO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBpc0tMaW5lU2VnbWVudDNkKGVudGl0eSkge1xyXG4gICAgcmV0dXJuICEhZW50aXR5LmRpcmVjdGlvbjtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gaXNLQXJjM2QoZW50aXR5KSB7XHJcbiAgICByZXR1cm4gISFlbnRpdHkuY2lyY2xlO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBib3VuZGVkQ3VydmVDb25uZWN0aW9uRGV0ZWN0KGF1eGlsaWFyeVZlcnRleCwgYXV4aWxpYXJ5Qm91bmRlZEN1cnZlKSB7XHJcbiAgICBjb25zdCBzdGFydFZlcnRleCA9IGF1eGlsaWFyeUJvdW5kZWRDdXJ2ZS5nZXRTdGFydFZlcnRleCgpO1xyXG4gICAgY29uc3QgZW5kVmVydGV4ID0gYXV4aWxpYXJ5Qm91bmRlZEN1cnZlLmdldFN0YXJ0VmVydGV4KCk7XHJcbiAgICBpZiAoc3RhcnRWZXJ0ZXguZ2V0S2V5KCkgPT09IGF1eGlsaWFyeVZlcnRleC5nZXRLZXkoKSkge1xyXG4gICAgICAgIHJldHVybiB7IGNvbm5lY3RlZDogdHJ1ZSwgcmV2ZXJzZWQ6IGZhbHNlIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChlbmRWZXJ0ZXguZ2V0S2V5KCkgPT09IGF1eGlsaWFyeVZlcnRleC5nZXRLZXkoKSkge1xyXG4gICAgICAgIHJldHVybiB7IGNvbm5lY3RlZDogdHJ1ZSwgcmV2ZXJzZWQ6IHRydWUgfTtcclxuICAgIH1cclxuICAgIHJldHVybiB7IGNvbm5lY3RlZDogZmFsc2UsIHJldmVyc2VkOiBmYWxzZSB9O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNjcmV0ZUF1eGlsaWFyeUJvdW5kZWRDdXJ2ZShhdXhpbGlhcnlCb3VuZGVkQ3VydmUpIHtcclxuICAgIGNvbnN0IGJvdW5kZWRDdXJ2ZSA9IGF1eGlsaWFyeUJvdW5kZWRDdXJ2ZS5nZXRCb3VuZGVkQ3VydmUoKTtcclxuICAgIGxldCBkaXNjcmV0ZVBvaW50cyA9IFtdO1xyXG4gICAgLy8gY29uc3QgcmVzdWx0OiBEaXNjcmV0ZVJlc3VsdCA9IHsgZGlzY3JldGVQb2ludHMsIGxlbmd0aDogMCB9O1xyXG4gICAgaWYgKGJvdW5kZWRDdXJ2ZSkge1xyXG4gICAgICAgIGlmIChpc0tMaW5lU2VnbWVudDNkKGJvdW5kZWRDdXJ2ZSkpIHtcclxuICAgICAgICAgICAgZGlzY3JldGVQb2ludHMgPSBbYm91bmRlZEN1cnZlLnN0YXJ0UG9pbnQsIGJvdW5kZWRDdXJ2ZS5lbmRQb2ludF07XHJcbiAgICAgICAgICAgIC8vIHJlc3VsdC5kaXNjcmV0ZVBvaW50cyA9IGRpc2NyZXRlUG9pbnRzO1xyXG4gICAgICAgICAgICAvLyByZXN1bHQubGVuZ3RoID0gZGlzY3JldGVQb2ludHNbMF0uZGlzdGFuY2VUbyhkaXNjcmV0ZVBvaW50c1sxXSk7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiB7IGRpc2NyZXRlUG9pbnRzLCBsZW5ndGg6IGRpc2NyZXRlUG9pbnRzWzBdLmRpc3RhbmNlVG8oZGlzY3JldGVQb2ludHNbMV0pIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGlzS0FyYzNkKGJvdW5kZWRDdXJ2ZSkpIHtcclxuICAgICAgICAgICAgZGlzY3JldGVQb2ludHMgPSBib3VuZGVkQ3VydmUuZ2V0QXBwcm94aW1hdGVQb2ludHNCeUFuZ2xlKCk7XHJcbiAgICAgICAgICAgIC8vIHJlc3VsdC5kaXNjcmV0ZVBvaW50cyA9IGRpc2NyZXRlUG9pbnRzO1xyXG4gICAgICAgICAgICAvLyByZXN1bHQubGVuZ3RoID0gZGlzY3JldGVQb2ludHMucmVkdWNlPG51bWJlcj4oKGFjYywgcG9pbnQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc3QgcHJldlBvaW50ID0gZGlzY3JldGVQb2ludHNbaW5kZXggLSAxXTtcclxuICAgICAgICAgICAgLy8gICAgICAgICBhY2MgKz0gcG9pbnQuZGlzdGFuY2VUbyhwcmV2UG9pbnQpO1xyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICAgICAgLy8gfSwgMCk7XHJcbiAgICAgICAgICAgIC8vIHJldHVybiB7XHJcbiAgICAgICAgICAgIC8vICAgICBkaXNjcmV0ZVBvaW50cywgbGVuZ3RoOiBkaXNjcmV0ZVBvaW50cy5yZWR1Y2U8bnVtYmVyPigoYWNjLCBwb2ludCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBpZiAoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IHByZXZQb2ludCA9IGRpc2NyZXRlUG9pbnRzW2luZGV4IC0gMV07XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGFjYyArPSBwb2ludC5kaXN0YW5jZVRvKHByZXZQb2ludCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIC8vICAgICB9LCAwKVxyXG4gICAgICAgICAgICAvLyB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBkaXNjcmV0ZVBvaW50cztcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV4aWxpYXJ5Qm91bmRlZEN1cnZlTm9ybWFsKGF1eGlsaWFyeUJvdW5kZWRDdXJ2ZSkge1xyXG4gICAgY29uc3QgYm91bmRlZEN1cnZlID0gYXV4aWxpYXJ5Qm91bmRlZEN1cnZlLmdldEJvdW5kZWRDdXJ2ZSgpO1xyXG4gICAgaWYgKGJvdW5kZWRDdXJ2ZSkge1xyXG4gICAgICAgIGlmIChpc0tBcmMzZChib3VuZGVkQ3VydmUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBib3VuZGVkQ3VydmUubm9ybWFsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUGF0aFBvc2VzKHBhdGgpIHtcclxuICAgIC8vIGNvbnN0IGFsbERpc2NyZXRlUG9pbnRzOiBLUG9pbnQzZFtdID0gW107XHJcbiAgICAvLyBjb25zdCBjb21wb25lbnRQb3NpdGlvbnM6IEtQb2ludDNkW10gPSBbXTtcclxuICAgIGNvbnN0IHBhdGhQb2ludFBvc2VzID0gW107XHJcbiAgICAvLyBsZXQgdG90YWxMZW5ndGg6IG51bWJlciA9IDA7XHJcbiAgICBsZXQgYWNjdW11bGF0ZUxlbmd0aCA9IDA7XHJcbiAgICBsZXQgcHJldk5vcm1hbDtcclxuICAgIGxldCBmaXJzdFZhbGlkTm9ybWFsID0gZHVtbXlWZWN0b3IzZDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHBhdGhPYmplY3QgPSBwYXRoW2ldO1xyXG4gICAgICAgIC8vIGNvbnN0IHsgZGlzY3JldGVQb2ludHMsIGxlbmd0aCB9ID0gcGF0aE9iamVjdDtcclxuICAgICAgICBjb25zdCBkaXNjcmV0ZVBvaW50cyA9IGRpc2NyZXRlQXV4aWxpYXJ5Qm91bmRlZEN1cnZlKHBhdGhPYmplY3QuY3VydmUpO1xyXG4gICAgICAgIC8vIHRvdGFsTGVuZ3RoICs9IGxlbmd0aDtcclxuICAgICAgICBpZiAoZGlzY3JldGVQb2ludHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbCA9IGdldEF1eGlsaWFyeUJvdW5kZWRDdXJ2ZU5vcm1hbChwYXRoT2JqZWN0LmN1cnZlKSB8fCBwcmV2Tm9ybWFsO1xyXG4gICAgICAgICAgICBwcmV2Tm9ybWFsID0gbm9ybWFsO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsKSB7XHJcbiAgICAgICAgICAgICAgICBmaXJzdFZhbGlkTm9ybWFsID0gbm9ybWFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGRpc2NyZXRlUG9pbnRzID0gcGF0aE9iamVjdC5yZXZlcnNlZCA/IGRpc2NyZXRlUG9pbnRzLnJldmVyc2UoKSA6IGRpc2NyZXRlUG9pbnRzO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRpc2NyZXRlUG9pbnRzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXNjcmV0ZVBvaW50ID0gZGlzY3JldGVQb2ludHNbal07XHJcbiAgICAgICAgICAgICAgICBpZiAoaiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudFBvc2l0aW9ucy5wdXNoKGRpc2NyZXRlUG9pbnRzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dERpc2NyZXRlUG9pbnQgPSBkaXNjcmV0ZVBvaW50c1tqICsgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhQb2ludFBvc2VzLnB1c2goeyBwb2ludDogZGlzY3JldGVQb2ludHNbMF0sIGRpcmVjdGlvbjogbmV4dERpc2NyZXRlUG9pbnQuc3VidHJhY3RlZChkaXNjcmV0ZVBvaW50KS5ub3JtYWxpemVkKCksIGFjY3VtdWxhdGVMZW5ndGggfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldkRpc2NyZXRlUG9pbnQgPSBkaXNjcmV0ZVBvaW50c1tqIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uID0gZGlzY3JldGVQb2ludC5zdWJ0cmFjdGVkKHByZXZEaXNjcmV0ZVBvaW50KS5ub3JtYWxpemVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudExlbmd0aCA9IHByZXZEaXNjcmV0ZVBvaW50LmRpc3RhbmNlVG8oZGlzY3JldGVQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0ZUxlbmd0aCArPSBzZWdtZW50TGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGhQb2ludFBvc2VzLnB1c2goeyBwb2ludDogZGlzY3JldGVQb2ludCwgZGlyZWN0aW9uLCBub3JtYWwsIGFjY3VtdWxhdGVMZW5ndGggfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaWYgKGkgIT09IDApIHtcclxuICAgICAgICAgICAgLy8gICAgIGRpc2NyZXRlUG9pbnRzLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gYWxsRGlzY3JldGVQb2ludHMucHVzaCguLi5kaXNjcmV0ZVBvaW50cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBwYXRoUG9pbnRQb3NlIG9mIHBhdGhQb2ludFBvc2VzKSB7XHJcbiAgICAgICAgaWYgKCFwYXRoUG9pbnRQb3NlLm5vcm1hbCkge1xyXG4gICAgICAgICAgICBwYXRoUG9pbnRQb3NlLm5vcm1hbCA9IGZpcnN0VmFsaWROb3JtYWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyBwYXRoUG9pbnRQb3NlcywgdG90YWxMZW5ndGg6IGFjY3VtdWxhdGVMZW5ndGggfTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtRnJvbVBhdGhQb2ludFBvc2VzKHBhdGhQb2ludFBvc2VzLCBwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgY291bnQsIGludGVydmFsLCBzY2FsZSB9ID0gcGFyYW1zO1xyXG4gICAgLy8gY29uc3QgeyBjb3VudCwgaW50ZXJ2YWwsIHBhdGhBeGlzLCBub3JtYWxBeGlzLCBzY2FsZSB9ID0gcGFyYW1zO1xyXG4gICAgY29uc3QgY29tcG9uZW50VHJhbnNmb3JtcyA9IFtdO1xyXG4gICAgY29uc3Qgc2NhbGVNYXRyaXggPSBHZW9tTGliLmNyZWF0ZVNjYWxlTWF0cml4NChzY2FsZS52YWx1ZSwgc2NhbGUudmFsdWUsIHNjYWxlLnZhbHVlKTtcclxuICAgIGxldCBjb21wb25lbnRJbmRleCA9IDA7XHJcbiAgICBsZXQgY29tcG9uZW50UG9zaXRpb25MZW5ndGggPSBjb21wb25lbnRJbmRleCAqIGludGVydmFsLnZhbHVlO1xyXG4gICAgLy8gbGV0IGJhc2VUcmFuc2Zvcm1JbnZlcnNlOiBLTWF0cml4NCA9IGR1bW15TWF0cml4NDtcclxuICAgIGZvciAobGV0IGsgPSAwOyBrIDwgcGF0aFBvaW50UG9zZXMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICBjb25zdCB7IHBvaW50LCBub3JtYWwsIGRpcmVjdGlvbiwgYWNjdW11bGF0ZUxlbmd0aCB9ID0gcGF0aFBvaW50UG9zZXNba107XHJcbiAgICAgICAgY29uc3QgcHJldkFjY3VtdWxhdGVMZW5ndGggPSBrID09PSAwID8gLTEgOiBwYXRoUG9pbnRQb3Nlc1trIC0gMV0uYWNjdW11bGF0ZUxlbmd0aDtcclxuICAgICAgICBsZXQgY29tcG9uZW50VHJhbnNmb3JtO1xyXG4gICAgICAgIGNvbnN0IHBhdGhOb3JtYWwgPSBub3JtYWwgfHwgZHVtbXlWZWN0b3IzZDtcclxuICAgICAgICAvLyBpZiAoayA9PT0gMCkge1xyXG4gICAgICAgIC8vICAgICBjb21wb25lbnRUcmFuc2Zvcm0gPSBHZW9tTGliLmNyZWF0ZVRyYW5zbGF0aW9uTWF0cml4NChwb2ludC54LCBwb2ludC55LCBwb2ludC56KVxyXG4gICAgICAgIC8vICAgICAgICAgLm11bHRpcGxpZWQoR2VvbUxpYi5jcmVhdGVBbGlnbkNDU01hdHJpeDQoZGlyZWN0aW9uLCBwYXRoTm9ybWFsLmNyb3NzKGRpcmVjdGlvbikubm9ybWFsaXplZCgpLCBwYXRoTm9ybWFsLCBkdW1teVBvaW50M2QpKVxyXG4gICAgICAgIC8vICAgICAgICAgLm11bHRpcGxpZWQoc2NhbGVNYXRyaXgpO1xyXG4gICAgICAgIC8vICAgICBiYXNlVHJhbnNmb3JtSW52ZXJzZSA9IGNvbXBvbmVudFRyYW5zZm9ybS5pbnZlcnNlZCgpO1xyXG4gICAgICAgIC8vICAgICBjb21wb25lbnRUcmFuc2Zvcm1zLnB1c2goY29tcG9uZW50VHJhbnNmb3JtLm11bHRpcGxpZWQocmVzZXRNYXRyaXgpKTtcclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGNvbnN0IHByZXZEaXNjcmV0ZVNlZ21lbnQgPSBwYXRoUG9pbnRQb3Nlc1trIC0gMV07XHJcbiAgICAgICAgLy8gY29uc3Qgc2VnbWVudExlbmd0aCA9IHByZXZEaXNjcmV0ZVNlZ21lbnQucG9pbnQuZGlzdGFuY2VUbyhwb2ludCk7XHJcbiAgICAgICAgd2hpbGUgKGNvbXBvbmVudEluZGV4IDwgY291bnQudmFsdWUgJiYgY29tcG9uZW50UG9zaXRpb25MZW5ndGggPiBwcmV2QWNjdW11bGF0ZUxlbmd0aCAmJiBjb21wb25lbnRQb3NpdGlvbkxlbmd0aCA8PSBhY2N1bXVsYXRlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IHNlZ21lbnREaXJlY3Rpb24gPSBwb2ludC5zdWJ0cmFjdGVkKHByZXZEaXNjcmV0ZVNlZ21lbnQucG9pbnQpLm5vcm1hbGl6ZWQoKTtcclxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50UG9zaXRpb24gPSBwb2ludC5hZGRlZChkaXJlY3Rpb24ubXVsdGlwbGllZChjb21wb25lbnRQb3NpdGlvbkxlbmd0aCAtIGFjY3VtdWxhdGVMZW5ndGgpKTtcclxuICAgICAgICAgICAgY29tcG9uZW50VHJhbnNmb3JtID0gR2VvbUxpYi5jcmVhdGVUcmFuc2xhdGlvbk1hdHJpeDQoY29tcG9uZW50UG9zaXRpb24ueCwgY29tcG9uZW50UG9zaXRpb24ueSwgY29tcG9uZW50UG9zaXRpb24ueilcclxuICAgICAgICAgICAgICAgIC5tdWx0aXBsaWVkKEdlb21MaWIuY3JlYXRlQWxpZ25DQ1NNYXRyaXg0KGRpcmVjdGlvbiwgcGF0aE5vcm1hbC5jcm9zcyhkaXJlY3Rpb24pLm5vcm1hbGl6ZWQoKSwgcGF0aE5vcm1hbCwgZHVtbXlQb2ludDNkKSlcclxuICAgICAgICAgICAgICAgIC5tdWx0aXBsaWVkKHNjYWxlTWF0cml4KTtcclxuICAgICAgICAgICAgLy8gY29tcG9uZW50UG9zaXRpb25zLnB1c2goKTtcclxuICAgICAgICAgICAgY29tcG9uZW50VHJhbnNmb3Jtcy5wdXNoKGNvbXBvbmVudFRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudEluZGV4Kys7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudFBvc2l0aW9uTGVuZ3RoID0gY29tcG9uZW50SW5kZXggKiBpbnRlcnZhbC52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3VycmVudExlbmd0aCArPSBzZWdtZW50TGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbXBvbmVudFRyYW5zZm9ybXM7XHJcbiAgICAvLyB9XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdW5kaW5nQm94U2l6ZUluV29ybGQoZ3JvdXBJbnN0YW5jZSkge1xyXG4gICAgY29uc3QgbG9jYWxCb3VuZGluZ0JveCA9IGdyb3VwSW5zdGFuY2UuZ2V0TG9jYWxCb3VuZGluZ0JveCgpO1xyXG4gICAgY29uc3QgdHJhbnNmb3JtID0gZ3JvdXBJbnN0YW5jZS5nZXRUcmFuc2Zvcm0oKTtcclxuICAgIGNvbnN0IG9sZFNpemUgPSBbR2VvbUxpYi5jcmVhdGVWZWN0b3IzZChsb2NhbEJvdW5kaW5nQm94LndpZHRoLCAwLCAwKSwgR2VvbUxpYi5jcmVhdGVWZWN0b3IzZCgwLCBsb2NhbEJvdW5kaW5nQm94LmhlaWdodCwgMCksIEdlb21MaWIuY3JlYXRlVmVjdG9yM2QoMCwgMCwgbG9jYWxCb3VuZGluZ0JveC5kZXB0aCldO1xyXG4gICAgcmV0dXJuIG9sZFNpemUubWFwKHZlYyA9PiB2ZWMuYXBwbGllZE1hdHJpeDQodHJhbnNmb3JtKS5sZW5ndGgpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHRlbmRlZFRyYW5zZm9ybSgpIHtcclxuICAgIGNvbnN0IGRlc2lnbiA9IGFwcC5nZXRBY3RpdmVEZXNpZ24oKTtcclxuICAgIGNvbnN0IGVkaXRQYXRoID0gZGVzaWduLmdldEVkaXRQYXRoKCk7XHJcbiAgICBjb25zdCBleHRlbmRlZFRyYW5zZm9ybSA9IEdlb21MaWIuY3JlYXRlSWRlbnRpdHlNYXRyaXg0KCk7XHJcbiAgICBmb3IgKGNvbnN0IHBhdGggb2YgZWRpdFBhdGgpIHtcclxuICAgICAgICBleHRlbmRlZFRyYW5zZm9ybS5tdWx0aXBseShwYXRoLmdldFRyYW5zZm9ybSgpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBleHRlbmRlZFRyYW5zZm9ybTtcclxufVxyXG4vLyBsZXQgY3VycmVudExlbmd0aDogbnVtYmVyID0gMDtcclxuLy8gbGV0IGNvbXBvbmVudEluZGV4OiBudW1iZXIgPSAxO1xyXG4vLyBsZXQgY29tcG9uZW50UG9zaXRpb25MZW5ndGggPSBjb21wb25lbnRJbmRleCAqIGF1dG9tYXRpY0ludGVydmFsO1xyXG4vLyBsZXQgYmFzZVRyYW5zZm9ybUludmVyc2U6IEtNYXRyaXg0ID0gZHVtbXlNYXRyaXg0O1xyXG4vLyBmb3IgKGxldCBrID0gMDsgayA8IHBhdGhQb2ludFBvc2VzLmxlbmd0aDsgaysrKSB7XHJcbi8vICAgICBjb25zdCBwYXRoUG9pbnRQb3NlID0gcGF0aFBvaW50UG9zZXNba107XHJcbi8vICAgICBsZXQgY29tcG9uZW50VHJhbnNmb3JtOiBLTWF0cml4NCB8IHVuZGVmaW5lZDtcclxuLy8gICAgIGNvbnN0IHBhdGhOb3JtYWw6IEtWZWN0b3IzZCA9IHBhdGhQb2ludFBvc2Uubm9ybWFsIHx8IGR1bW15VmVjdG9yM2Q7XHJcbi8vICAgICBpZiAoayA9PT0gMCkge1xyXG4vLyAgICAgICAgIGNvbXBvbmVudFRyYW5zZm9ybSA9IEdlb21MaWIuY3JlYXRlVHJhbnNsYXRpb25NYXRyaXg0KHBhdGhQb2ludFBvc2UucG9pbnQueCwgcGF0aFBvaW50UG9zZS5wb2ludC55LCBwYXRoUG9pbnRQb3NlLnBvaW50LnopXHJcbi8vICAgICAgICAgICAgIC5tdWx0aXBsaWVkKEdlb21MaWIuY3JlYXRlQWxpZ25DQ1NNYXRyaXg0KHBhdGhQb2ludFBvc2UuZGlyZWN0aW9uLCBwYXRoTm9ybWFsLmNyb3NzKHBhdGhQb2ludFBvc2UuZGlyZWN0aW9uKS5ub3JtYWxpemVkKCksIHBhdGhOb3JtYWwsIGR1bW15UG9pbnQzZCkpXHJcbi8vICAgICAgICAgICAgIC5tdWx0aXBsaWVkKHNjYWxlTWF0cml4KTtcclxuLy8gICAgICAgICBiYXNlVHJhbnNmb3JtSW52ZXJzZSA9IGNvbXBvbmVudFRyYW5zZm9ybS5pbnZlcnNlZCgpO1xyXG4vLyAgICAgICAgIGNvbXBvbmVudFRyYW5zZm9ybXMucHVzaChjb21wb25lbnRUcmFuc2Zvcm0ubXVsdGlwbGllZChyZXNldE1hdHJpeCkpO1xyXG4vLyAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICBjb25zdCBwcmV2RGlzY3JldGVTZWdtZW50ID0gcGF0aFBvaW50UG9zZXNbayAtIDFdO1xyXG4vLyAgICAgICAgIGNvbnN0IHNlZ21lbnRMZW5ndGggPSBwcmV2RGlzY3JldGVTZWdtZW50LnBvaW50LmRpc3RhbmNlVG8ocGF0aFBvaW50UG9zZS5wb2ludCk7XHJcbi8vICAgICAgICAgd2hpbGUgKGNvbXBvbmVudEluZGV4IDwgdGhpcy5wYXRoQXJyYXlQYXJhbXMuY291bnQgJiYgY29tcG9uZW50UG9zaXRpb25MZW5ndGggPiBjdXJyZW50TGVuZ3RoICYmIGNvbXBvbmVudFBvc2l0aW9uTGVuZ3RoIDw9IChjdXJyZW50TGVuZ3RoICsgc2VnbWVudExlbmd0aCkpIHtcclxuLy8gICAgICAgICAgICAgY29uc3Qgc2VnbWVudERpcmVjdGlvbiA9IHBhdGhQb2ludFBvc2UucG9pbnQuc3VidHJhY3RlZChwcmV2RGlzY3JldGVTZWdtZW50LnBvaW50KS5ub3JtYWxpemVkKCk7XHJcbi8vICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFBvc2l0aW9uID0gcHJldkRpc2NyZXRlU2VnbWVudC5wb2ludC5hZGRlZChzZWdtZW50RGlyZWN0aW9uLm11bHRpcGxpZWQoY29tcG9uZW50UG9zaXRpb25MZW5ndGggLSBjdXJyZW50TGVuZ3RoKSk7XHJcbi8vICAgICAgICAgICAgIGNvbXBvbmVudFRyYW5zZm9ybSA9IEdlb21MaWIuY3JlYXRlVHJhbnNsYXRpb25NYXRyaXg0KGNvbXBvbmVudFBvc2l0aW9uLngsIGNvbXBvbmVudFBvc2l0aW9uLnksIGNvbXBvbmVudFBvc2l0aW9uLnopXHJcbi8vICAgICAgICAgICAgICAgICAubXVsdGlwbGllZChHZW9tTGliLmNyZWF0ZUFsaWduQ0NTTWF0cml4NChwYXRoUG9pbnRQb3NlLmRpcmVjdGlvbiwgcGF0aE5vcm1hbC5jcm9zcyhwYXRoUG9pbnRQb3NlLmRpcmVjdGlvbikubm9ybWFsaXplZCgpLCBwYXRoTm9ybWFsLCBkdW1teVBvaW50M2QpKVxyXG4vLyAgICAgICAgICAgICAgICAgLm11bHRpcGxpZWQoc2NhbGVNYXRyaXgpO1xyXG4vLyAgICAgICAgICAgICAvLyBjb21wb25lbnRQb3NpdGlvbnMucHVzaCgpO1xyXG4vLyAgICAgICAgICAgICBjb21wb25lbnRUcmFuc2Zvcm1zLnB1c2goY29tcG9uZW50VHJhbnNmb3JtLm11bHRpcGxpZWQoYmFzZVRyYW5zZm9ybUludmVyc2UpKTtcclxuLy8gICAgICAgICAgICAgY29tcG9uZW50SW5kZXgrKztcclxuLy8gICAgICAgICAgICAgY29tcG9uZW50UG9zaXRpb25MZW5ndGggPSBjb21wb25lbnRJbmRleCAqIGF1dG9tYXRpY0ludGVydmFsO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgICBjdXJyZW50TGVuZ3RoICs9IHNlZ21lbnRMZW5ndGg7XHJcbi8vICAgICB9XHJcbi8vIH1cclxuLy8gaWYgKGNvbXBvbmVudEluZGV4IDwgdGhpcy5jb3VudCkge1xyXG4vLyAgICAgY29uc3QgY29tcG9uZW50SW5kZXhJblBhdGggPSBjb21wb25lbnRJbmRleCAtIDE7XHJcbi8vICAgICBjb25zdCB0YWlsTGVuZ3RoOiBudW1iZXIgPSB0b3RhbExlbmd0aCAtIChjb21wb25lbnRJbmRleCAtIDEpICogdGhpcy5pbnRlcnZhbDtcclxuLy8gICAgIGNvbnN0IHRhaWxEaXJlY3Rpb24gPSBhbGxEaXNjcmV0ZVBvaW50c1thbGxEaXNjcmV0ZVBvaW50cy5sZW5ndGggLSAxXS5zdWJ0cmFjdGVkKGFsbERpc2NyZXRlUG9pbnRzW2FsbERpc2NyZXRlUG9pbnRzLmxlbmd0aCAtIDJdKS5ub3JtYWxpemVkKCk7XHJcbi8vICAgICBjb21wb25lbnRQb3NpdGlvbkxlbmd0aCA9IChjb21wb25lbnRJbmRleCAtIGNvbXBvbmVudEluZGV4SW5QYXRoKSAqIHRoaXMuaW50ZXJ2YWw7XHJcbi8vICAgICBjb21wb25lbnRQb3NpdGlvbnMucHVzaChhbGxEaXNjcmV0ZVBvaW50c1thbGxEaXNjcmV0ZVBvaW50cy5sZW5ndGggLSAxXS5hZGRlZCh0YWlsRGlyZWN0aW9uLm11bHRpcGxpZWQoY29tcG9uZW50UG9zaXRpb25MZW5ndGggLSB0YWlsTGVuZ3RoKSkpO1xyXG4vLyAgICAgY29tcG9uZW50SW5kZXgrKztcclxuLy8gICAgIGNvbXBvbmVudFBvc2l0aW9uTGVuZ3RoID0gKGNvbXBvbmVudEluZGV4IC0gY29tcG9uZW50SW5kZXhJblBhdGgpICogdGhpcy5pbnRlcnZhbDtcclxuLy8gICAgIHdoaWxlIChjb21wb25lbnRJbmRleCA8IHRoaXMuY291bnQpIHtcclxuLy8gICAgICAgICBjb21wb25lbnRQb3NpdGlvbnMucHVzaChjb21wb25lbnRQb3NpdGlvbnNbY29tcG9uZW50UG9zaXRpb25zLmxlbmd0aCAtIDFdLmFkZGVkKHRhaWxEaXJlY3Rpb24ubXVsdGlwbGllZChjb21wb25lbnRQb3NpdGlvbkxlbmd0aCkpKTtcclxuLy8gICAgICAgICBjb21wb25lbnRJbmRleCsrO1xyXG4vLyAgICAgICAgIGNvbXBvbmVudFBvc2l0aW9uTGVuZ3RoID0gKGNvbXBvbmVudEluZGV4IC0gY29tcG9uZW50SW5kZXhJblBhdGgpICogdGhpcy5pbnRlcnZhbDtcclxuLy8gICAgIH1cclxuLy8gfVxyXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbmltcG9ydCB7IENvbXBvbmVudFByb3BlcnR5S2V5LCBDb3VudFByb3BlcnR5S2V5LCBEZWZhdWx0UGF0aEFycmF5UGFyYW1zLCBJbnRlcnZhbFByb3BlcnR5S2V5LCBpc0F4aXNWYWxpZCwgTWFudWFsUHJlZml4LCBOb3JtYWxBeGlzUHJvcGVydHlLZXksIFBhdGhBeGlzUHJvcGVydHlLZXksIFBhdGhEZWxpbWl0ZXIsIFBhdGhMaXN0UHJvcGVydHlLZXksIFBhdGhSZXZlcnNlZERlbGltaXRlciwgU2NhbGVQcm9wZXJ0eUtleSB9IGZyb20gXCIuL3R5cGVzXCI7XHJcbmltcG9ydCB7IGdlbmVyYXRlUGF0aFBvc2VzLCBnZXRUcmFuc2Zvcm1Gcm9tUGF0aFBvaW50UG9zZXMsIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuY29uc3QgZGVzaWduID0gYXBwLmdldEFjdGl2ZURlc2lnbigpO1xyXG5leHBvcnQgY2xhc3MgUGF0aEFycmF5UGFyYW1zRWRpdFRvb2wge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gW107XHJcbiAgICAgICAgdGhpcy5wYXRoID0gW107XHJcbiAgICAgICAgdGhpcy5wYXRoUG9pbnRQb3NlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMudG90YWxMZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMucGF0aEFycmF5UGFyYW1zID0gRGVmYXVsdFBhdGhBcnJheVBhcmFtcztcclxuICAgIH1cclxuICAgIGdldFBhdGhBcnJheVBhcmFtcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXRoQXJyYXlQYXJhbXM7XHJcbiAgICB9XHJcbiAgICBzZXRNb2RlbChtb2RlbCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBjb21wb25lbnRzID0gKF9hID0gbW9kZWwuZ2V0R3JvdXBEZWZpbml0aW9uKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRTdWJHcm91cEluc3RhbmNlcygpLnJlZHVjZSgoYWNjLCBpbnN0YW5jZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRQcm9wZXJ0eSA9IGluc3RhbmNlLmdldEN1c3RvbVByb3BlcnR5KENvbXBvbmVudFByb3BlcnR5S2V5KTtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBOdW1iZXIucGFyc2VJbnQoY29tcG9uZW50UHJvcGVydHkpO1xyXG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgYWNjLnB1c2goeyBpbnN0YW5jZSwgaW5kZXggfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcmV0dXJuIHsgaW5zdGFuY2UsIGluZGV4OiBOdW1iZXIufTtcclxuICAgICAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgICB9LCBbXSkuc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xyXG4gICAgICAgIGlmIChjb21wb25lbnRzID09PSBudWxsIHx8IGNvbXBvbmVudHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbXBvbmVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvdW50UHJvcGVydHkgPSBtb2RlbC5nZXRDdXN0b21Qcm9wZXJ0eShDb3VudFByb3BlcnR5S2V5KTtcclxuICAgICAgICAgICAgY29uc3QgY291bnQgPSBOdW1iZXIucGFyc2VJbnQoY291bnRQcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsUHJvcGVydHkgPSBtb2RlbC5nZXRDdXN0b21Qcm9wZXJ0eShJbnRlcnZhbFByb3BlcnR5S2V5KTtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWxMb2NrZWQgPSBpbnRlcnZhbFByb3BlcnR5LnN0YXJ0c1dpdGgoTWFudWFsUHJlZml4KTtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBpbnRlcnZhbExvY2tlZCA/IE51bWJlci5wYXJzZUZsb2F0KGludGVydmFsUHJvcGVydHkuc2xpY2UoMSkpIDogTnVtYmVyLnBhcnNlRmxvYXQoaW50ZXJ2YWxQcm9wZXJ0eSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhdGhBeGlzUHJvcGVydHkgPSBtb2RlbC5nZXRDdXN0b21Qcm9wZXJ0eShQYXRoQXhpc1Byb3BlcnR5S2V5KTtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsQXhpc1Byb3BlcnR5ID0gbW9kZWwuZ2V0Q3VzdG9tUHJvcGVydHkoTm9ybWFsQXhpc1Byb3BlcnR5S2V5KTtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGVQcm9wZXJ0eSA9IG1vZGVsLmdldEN1c3RvbVByb3BlcnR5KFNjYWxlUHJvcGVydHlLZXkpO1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZUxvY2tlZCA9IHNjYWxlUHJvcGVydHkuc3RhcnRzV2l0aChNYW51YWxQcmVmaXgpO1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IHNjYWxlTG9ja2VkID8gTnVtYmVyLnBhcnNlRmxvYXQoc2NhbGVQcm9wZXJ0eS5zbGljZSgxKSkgOiBOdW1iZXIucGFyc2VGbG9hdChzY2FsZVByb3BlcnR5KTtcclxuICAgICAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShjb3VudCkgJiYgY291bnQgPiAxICYmIE51bWJlci5pc0Zpbml0ZShpbnRlcnZhbCkgJiYgTnVtYmVyLmlzRmluaXRlKHNjYWxlKSAmJiBpc0F4aXNWYWxpZChwYXRoQXhpc1Byb3BlcnR5KSAmJiBpc0F4aXNWYWxpZChub3JtYWxBeGlzUHJvcGVydHkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoTGlzdFByb3BlcnR5ID0gbW9kZWwuZ2V0Q3VzdG9tUHJvcGVydHkoUGF0aExpc3RQcm9wZXJ0eUtleSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdXhpbGlhcnlCb3VuZGVkQ3VydmVNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBhdXhpbGlhcnlCb3VuZGVkQ3VydmVzID0gbW9kZWwuZ2V0R3JvdXBEZWZpbml0aW9uKCk/LmdldEF1eGlsaWFyeUN1cnZlcygpLmZvckVhY2goY3VydmUgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGlmIChpc0tBdXhpbGlhcnlCb3VuZGVkQ3VydmUoY3VydmUpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGF1eGlsaWFyeUJvdW5kZWRDdXJ2ZU1hcC5zZXQoY3VydmUuZ2V0S2V5KCksIGN1cnZlKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB9KTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXRoVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXRoU3RyIG9mIHBhdGhMaXN0UHJvcGVydHkuc3BsaXQoUGF0aERlbGltaXRlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxpdFJlc3VsdCA9IHBhdGhTdHIuc3BsaXQoUGF0aFJldmVyc2VkRGVsaW1pdGVyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXRSZXN1bHQubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1eGlsaWFyeUJvdW5kZWRDdXJ2ZSA9IGF1eGlsaWFyeUJvdW5kZWRDdXJ2ZU1hcC5nZXQoc3BsaXRSZXN1bHRbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV4aWxpYXJ5Qm91bmRlZEN1cnZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBkaXNjcmV0ZVJlc3VsdCA9IGRpc2NyZXRlQXV4aWxpYXJ5Qm91bmRlZEN1cnZlKGF1eGlsaWFyeUJvdW5kZWRDdXJ2ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAoZGlzY3JldGVSZXN1bHQuZGlzY3JldGVQb2ludHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoLnB1c2goeyBjdXJ2ZTogYXV4aWxpYXJ5Qm91bmRlZEN1cnZlLCByZXZlcnNlZDogc3BsaXRSZXN1bHRbMV0gPT09ICcxJyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYXRoVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwYXRoVmFsaWQgJiYgcGF0aC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzID0gY29tcG9uZW50cztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdGggPSBwYXRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcGF0aFBvaW50UG9zZXMsIHRvdGFsTGVuZ3RoIH0gPSB0aGlzLnBhdGhQb2ludFBvc2VzLmxlbmd0aCA/IHsgcGF0aFBvaW50UG9zZXM6IHRoaXMucGF0aFBvaW50UG9zZXMsIHRvdGFsTGVuZ3RoOiB0aGlzLnRvdGFsTGVuZ3RoIH0gOiBnZW5lcmF0ZVBhdGhQb3Nlcyh0aGlzLnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF0aFBvaW50UG9zZXMgPSBwYXRoUG9pbnRQb3NlcztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsTGVuZ3RoID0gdG90YWxMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXRoQXJyYXlQYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsOiB7IHZhbHVlOiBpbnRlcnZhbCwgbWluOiAxMCwgbWF4OiB0b3RhbExlbmd0aCAvIGNvdW50IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsTG9ja2VkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogeyB2YWx1ZTogY291bnQsIG1pbjogMSwgbWF4OiBNYXRoLmZsb29yKHRvdGFsTGVuZ3RoIC8gaW50ZXJ2YWwpIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhBeGlzOiBwYXRoQXhpc1Byb3BlcnR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxBeGlzOiBub3JtYWxBeGlzUHJvcGVydHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiB7IHZhbHVlOiBzY2FsZSwgbWluOiAwLjAxLCBtYXg6IDEwMDAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVMb2NrZWRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNsZWFyTW9kZWwoKSB7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnBhdGggPSBbXTtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICB0aGlzLnBhdGhQb2ludFBvc2VzID0gW107XHJcbiAgICAgICAgdGhpcy50b3RhbExlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5wYXRoQXJyYXlQYXJhbXMgPSBEZWZhdWx0UGF0aEFycmF5UGFyYW1zO1xyXG4gICAgfVxyXG4gICAgLy8gZ2V0TW9kZWwoKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMubW9kZWw7XHJcbiAgICAvLyB9XHJcbiAgICBkb09wZXJhdGlvbihwYXJhbXMsIG5lZWRUcmFuc2Zvcm0gPSB0cnVlKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5tb2RlbClcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgeyBwYXRoUG9pbnRQb3NlcywgdG90YWxMZW5ndGggfSA9IHRoaXMucGF0aFBvaW50UG9zZXMubGVuZ3RoID8geyBwYXRoUG9pbnRQb3NlczogdGhpcy5wYXRoUG9pbnRQb3NlcywgdG90YWxMZW5ndGg6IHRoaXMudG90YWxMZW5ndGggfSA6IGdlbmVyYXRlUGF0aFBvc2VzKHRoaXMucGF0aCk7XHJcbiAgICAgICAgICAgIHRoaXMucGF0aFBvaW50UG9zZXMgPSBwYXRoUG9pbnRQb3NlcztcclxuICAgICAgICAgICAgdGhpcy50b3RhbExlbmd0aCA9IHRvdGFsTGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRUcmFuc2Zvcm1zID0gZ2V0VHJhbnNmb3JtRnJvbVBhdGhQb2ludFBvc2VzKHBhdGhQb2ludFBvc2VzLCBwYXJhbXMpO1xyXG4gICAgICAgICAgICAvLyBjb25zdCBzY2FsZU1hdHJpeCA9IEdlb21MaWIuY3JlYXRlU2NhbGVNYXRyaXg0KHNjYWxlLCBzY2FsZSwgc2NhbGUpO1xyXG4gICAgICAgICAgICBsZXQgb3BlcmF0aW9uU3VjY2VzcyA9ICh5aWVsZCBkZXNpZ24uYWN0aXZhdGVHcm91cEluc3RhbmNlKHRoaXMubW9kZWwpKS5pc1N1Y2Nlc3M7XHJcbiAgICAgICAgICAgIGlmIChuZWVkVHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnRUcmFuc2Zvcm0gPSBjb21wb25lbnQuaW5zdGFuY2UuZ2V0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgZXh0ZW5kZWRUcmFuc2Zvcm0gPSBnZXRFeHRlbmRlZFRyYW5zZm9ybSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudExvY2FsQm91bmRpbmdCb3ggPSBjb21wb25lbnQuaW5zdGFuY2UuZ2V0TG9jYWxCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFBvc2l0aW9uID0gY29tcG9uZW50TG9jYWxCb3VuZGluZ0JveC5jZW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzZXRNYXRyaXggPSBHZW9tTGliLmNyZWF0ZVRyYW5zbGF0aW9uTWF0cml4NCgtY29tcG9uZW50UG9zaXRpb24ueCwgLWNvbXBvbmVudFBvc2l0aW9uLnksIC1jb21wb25lbnRQb3NpdGlvbi56KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGllZChjb21wb25lbnRUcmFuc2Zvcm0uaW52ZXJzZWQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtUmVzdWx0ID0gZGVzaWduLnRyYW5zZm9ybUdyb3VwSW5zdGFuY2VzKFtjb21wb25lbnQuaW5zdGFuY2VdLCBjb21wb25lbnRUcmFuc2Zvcm1zW2NvbXBvbmVudC5pbmRleF0ubXVsdGlwbGllZChyZXNldE1hdHJpeCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNmb3JtUmVzdWx0LmlzU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25TdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmNvdW50ID4gdGhpcy5wYXRoQXJyYXlQYXJhbXMuY291bnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudEluc3RhbmNlID0gdGhpcy5jb21wb25lbnRzWzBdLmluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcG9uZW50VHJhbnNmb3JtID0gY29tcG9uZW50SW5zdGFuY2UuZ2V0VHJhbnNmb3JtKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnRMb2NhbEJvdW5kaW5nQm94ID0gY29tcG9uZW50SW5zdGFuY2UuZ2V0TG9jYWxCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcG9uZW50UG9zaXRpb24gPSBjb21wb25lbnRMb2NhbEJvdW5kaW5nQm94LmNlbnRlcjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VUcmFuc2Zvcm1JbnZlcnNlID0gR2VvbUxpYi5jcmVhdGVUcmFuc2xhdGlvbk1hdHJpeDQoLWNvbXBvbmVudFBvc2l0aW9uLngsIC1jb21wb25lbnRQb3NpdGlvbi55LCAtY29tcG9uZW50UG9zaXRpb24ueilcclxuICAgICAgICAgICAgICAgICAgICAubXVsdGlwbGllZChjb21wb25lbnRUcmFuc2Zvcm0uaW52ZXJzZWQoKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdHcm91cEluc3RhbmNlcyA9IChfYSA9IGRlc2lnbi5idWxrQ29weUdyb3VwSW5zdGFuY2VzKFtjb21wb25lbnRJbnN0YW5jZV0sIFtjb21wb25lbnRUcmFuc2Zvcm1zLnNsaWNlKHRoaXMucGF0aEFycmF5UGFyYW1zLmNvdW50LnZhbHVlKS5tYXAobWF0cml4ID0+IG1hdHJpeC5tdWx0aXBsaWVkKGJhc2VUcmFuc2Zvcm1JbnZlcnNlKSldKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFkZGVkSW5zdGFuY2VzO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0dyb3VwSW5zdGFuY2VzID09PSBudWxsIHx8IG5ld0dyb3VwSW5zdGFuY2VzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuZXdHcm91cEluc3RhbmNlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IHRoaXMucGF0aEFycmF5UGFyYW1zLmNvdW50LnZhbHVlOyBpbmRleCA8IHBhcmFtcy5jb3VudC52YWx1ZTsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25TdWNjZXNzID0gb3BlcmF0aW9uU3VjY2VzcyAmJiBuZXdHcm91cEluc3RhbmNlc1tpbmRleCAtIHRoaXMucGF0aEFycmF5UGFyYW1zLmNvdW50LnZhbHVlXS5zZXRDdXN0b21Qcm9wZXJ0eShDb21wb25lbnRQcm9wZXJ0eUtleSwgYCR7aW5kZXh9YCkuaXNTdWNjZXNzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbLi4udGhpcy5jb21wb25lbnRzLCAuLi5uZXdHcm91cEluc3RhbmNlcy5tYXAoKGluc3RhbmNlLCBpKSA9PiB7IHJldHVybiB7IGluc3RhbmNlLCBpbmRleDogdGhpcy5wYXRoQXJyYXlQYXJhbXMuY291bnQudmFsdWUgKyBpIH07IH0pXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25TdWNjZXNzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnRJbmRleCA9IHRoaXMuY29tcG9uZW50cy5maW5kSW5kZXgoY29tcG9uZW50ID0+IGNvbXBvbmVudC5pbmRleCA9PT0gcGFyYW1zLmNvdW50LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRvRGVsZXRlQ29tcG9uZW50cyA9IHRoaXMuY29tcG9uZW50cy5zbGljZShjb21wb25lbnRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRvRGVsZXRlQ29tcG9uZW50IG9mIHRvRGVsZXRlQ29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvblN1Y2Nlc3MgPSBvcGVyYXRpb25TdWNjZXNzICYmIGRlc2lnbi5yZW1vdmVHcm91cEluc3RhbmNlKHRvRGVsZXRlQ29tcG9uZW50Lmluc3RhbmNlKS5pc1N1Y2Nlc3M7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5zcGxpY2UoY29tcG9uZW50SW5kZXgsIHRoaXMuY29tcG9uZW50cy5sZW5ndGggLSBjb21wb25lbnRJbmRleCArIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wZXJhdGlvblN1Y2Nlc3MgPSBvcGVyYXRpb25TdWNjZXNzICYmICh5aWVsZCBkZXNpZ24uZGVhY3RpdmF0ZUdyb3VwSW5zdGFuY2UoKSkuaXNTdWNjZXNzO1xyXG4gICAgICAgICAgICByZXR1cm4gb3BlcmF0aW9uU3VjY2VzcztcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUludGVydmFsKG5ld0ludGVydmFsKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWwgJiYgdGhpcy5jb21wb25lbnRzLmxlbmd0aCAmJiB0aGlzLnBhdGgubGVuZ3RoICYmIHRoaXMucGF0aEFycmF5UGFyYW1zICYmIG5ld0ludGVydmFsICE9PSB0aGlzLnBhdGhBcnJheVBhcmFtcy5pbnRlcnZhbC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBzY2FsZSwgY291bnQsIHNjYWxlTG9ja2VkIH0gPSB0aGlzLnBhdGhBcnJheVBhcmFtcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudEluc3RhbmNlID0gdGhpcy5jb21wb25lbnRzWzBdLmluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcG9uZW50TG9jYWxCb3VuZGluZ0JveCA9IGNvbXBvbmVudEluc3RhbmNlLmdldExvY2FsQm91bmRpbmdCb3goKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IGNvbXBvbmVudHM6IEtHcm91cEluc3RhbmNlW10gPSBbY29tcG9uZW50XTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IGF1dG9tYXRpY0ludGVydmFsID0gdG90YWxMZW5ndGggLyAodGhpcy5wYXRoQXJyYXlQYXJhbXMuY291bnQgLSAxKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IHdvcmxkU2l6ZSA9IGdldEJvdW5kaW5nQm94U2l6ZUluV29ybGQoY29tcG9uZW50SW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmVlZE5ld0NvdW50ID0gbmV3SW50ZXJ2YWwgKiBjb3VudC52YWx1ZSA+IHRoaXMudG90YWxMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdDb3VudCA9IG5lZWROZXdDb3VudCA/IE1hdGguZmxvb3IodGhpcy50b3RhbExlbmd0aCAvIG5ld0ludGVydmFsKSA6IGNvdW50LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsU2NhbGUgPSBzY2FsZUxvY2tlZCA/IHNjYWxlLnZhbHVlIDogKGNvbXBvbmVudExvY2FsQm91bmRpbmdCb3gud2lkdGggPiAobmV3SW50ZXJ2YWwgLyAyKSA/IChuZXdJbnRlcnZhbCAvIDIgLyBjb21wb25lbnRMb2NhbEJvdW5kaW5nQm94LndpZHRoKSA6IHNjYWxlLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGRlc2lnbi5zdGFydE9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UGFyYW1zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBhdGhBcnJheVBhcmFtcyksIHsgaW50ZXJ2YWw6IHsgdmFsdWU6IG5ld0ludGVydmFsLCBtaW46IDEwLCBtYXg6IHRoaXMudG90YWxMZW5ndGggLyBuZXdDb3VudCB9LCBjb3VudDogeyB2YWx1ZTogbmV3Q291bnQsIG1pbjogMSwgbWF4OiBNYXRoLmZsb29yKHRoaXMudG90YWxMZW5ndGggLyBuZXdJbnRlcnZhbCkgfSwgc2NhbGU6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2NhbGUpLCB7IHZhbHVlOiBhY3R1YWxTY2FsZSB9KSB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvblN1Y2Nlc3MgPSB5aWVsZCB0aGlzLmRvT3BlcmF0aW9uKG5ld1BhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBjb21wb25lbnRUcmFuc2Zvcm1zOiBLTWF0cml4NFtdID0gZ2V0VHJhbnNmb3JtRnJvbVBhdGhQb2ludFBvc2VzKHBhdGhQb2ludFBvc2VzLCB7IC4uLnRoaXMucGF0aEFycmF5UGFyYW1zLCBpbnRlcnZhbCwgc2NhbGU6IGFjdHVhbFNjYWxlIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNpZ24uY29tbWl0T3BlcmF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zZXRDdXN0b21Qcm9wZXJ0eShJbnRlcnZhbFByb3BlcnR5S2V5LCBgJHtuZXdJbnRlcnZhbH1gKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXNjYWxlTG9ja2VkICYmIGFjdHVhbFNjYWxlICE9PSBzY2FsZS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNldEN1c3RvbVByb3BlcnR5KFNjYWxlUHJvcGVydHlLZXksIGAke2FjdHVhbFNjYWxlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdGhBcnJheVBhcmFtcyA9IG5ld1BhcmFtcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2lnbi5hYm9ydE9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wZXJhdGlvblN1Y2Nlc3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUNvdW50KG5ld0NvdW50KSB7XHJcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZWwgJiYgdGhpcy5jb21wb25lbnRzLmxlbmd0aCAmJiB0aGlzLnBhdGgubGVuZ3RoICYmIHRoaXMucGF0aEFycmF5UGFyYW1zICYmIG5ld0NvdW50ICE9PSB0aGlzLnBhdGhBcnJheVBhcmFtcy5jb3VudC52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBpbnRlcnZhbCwgaW50ZXJ2YWxMb2NrZWQsIGNvdW50LCBzY2FsZSwgc2NhbGVMb2NrZWQgfSA9IHRoaXMucGF0aEFycmF5UGFyYW1zO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG90YWxMZW5ndGggPSB0aGlzLnBhdGhQb2ludFBvc2VzLmxlbmd0aCA/IHRoaXMudG90YWxMZW5ndGggOiBnZW5lcmF0ZVBhdGhQb3Nlcyh0aGlzLnBhdGgpLnRvdGFsTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbExlbmd0aCA9IHRvdGFsTGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29tcG9uZW50SW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudHNbMF0uaW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnRMb2NhbEJvdW5kaW5nQm94ID0gY29tcG9uZW50SW5zdGFuY2UuZ2V0TG9jYWxCb3VuZGluZ0JveCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgY29tcG9uZW50czogS0dyb3VwSW5zdGFuY2VbXSA9IFtjb21wb25lbnRdO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgYXV0b21hdGljSW50ZXJ2YWwgPSB0b3RhbExlbmd0aCAvICh0aGlzLnBhdGhBcnJheVBhcmFtcy5jb3VudCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc3Qgd29ybGRTaXplID0gZ2V0Qm91bmRpbmdCb3hTaXplSW5Xb3JsZChjb21wb25lbnRJbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZWVkTmV3SW50ZXJ2YWwgPSAobmV3Q291bnQgPiBjb3VudC52YWx1ZSAmJiAodGhpcy50b3RhbExlbmd0aCA+IGludGVydmFsLnZhbHVlICogbmV3Q291bnQpKSB8fCAobmV3Q291bnQgPCBjb3VudC52YWx1ZSAmJiAhaW50ZXJ2YWxMb2NrZWQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsSW50ZXJ2YWwgPSBuZWVkTmV3SW50ZXJ2YWwgPyB0aGlzLnRvdGFsTGVuZ3RoIC8gbmV3Q291bnQgOiBpbnRlcnZhbC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5lZWROZXdTY2FsZSA9IG5lZWROZXdJbnRlcnZhbCB8fCAoIXNjYWxlTG9ja2VkICYmIGNvbXBvbmVudExvY2FsQm91bmRpbmdCb3gud2lkdGggPiAoYWN0dWFsSW50ZXJ2YWwgLyAyKSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3R1YWxTY2FsZSA9IG5lZWROZXdTY2FsZSA/IChhY3R1YWxJbnRlcnZhbCAvIDIgLyBjb21wb25lbnRMb2NhbEJvdW5kaW5nQm94LndpZHRoKSA6IHNjYWxlLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZGVzaWduLnN0YXJ0T3BlcmF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXJhbXMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMucGF0aEFycmF5UGFyYW1zKSwgeyBpbnRlcnZhbDogeyB2YWx1ZTogYWN0dWFsSW50ZXJ2YWwsIG1pbjogMTAsIG1heDogdG90YWxMZW5ndGggLyBuZXdDb3VudCB9LCBjb3VudDogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBhdGhBcnJheVBhcmFtcy5jb3VudCksIHsgdmFsdWU6IG5ld0NvdW50IH0pLCBzY2FsZTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBhdGhBcnJheVBhcmFtcy5zY2FsZSksIHsgdmFsdWU6IGFjdHVhbFNjYWxlIH0pIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9uU3VjY2VzcyA9IHlpZWxkIHRoaXMuZG9PcGVyYXRpb24obmV3UGFyYW1zLCBuZWVkTmV3SW50ZXJ2YWwgfHwgbmVlZE5ld1NjYWxlKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IGNvbXBvbmVudFRyYW5zZm9ybXM6IEtNYXRyaXg0W10gPSBnZXRUcmFuc2Zvcm1Gcm9tUGF0aFBvaW50UG9zZXMocGF0aFBvaW50UG9zZXMsIHsgLi4udGhpcy5wYXRoQXJyYXlQYXJhbXMsIGludGVydmFsLCBzY2FsZTogYWN0dWFsU2NhbGUgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2lnbi5jb21taXRPcGVyYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNldEN1c3RvbVByb3BlcnR5KENvbXBvbmVudFByb3BlcnR5S2V5LCBgJHtuZXdDb3VudH1gKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmVlZE5ld0ludGVydmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWwuc2V0Q3VzdG9tUHJvcGVydHkoSW50ZXJ2YWxQcm9wZXJ0eUtleSwgYCR7YWN0dWFsSW50ZXJ2YWx9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZWVkTmV3U2NhbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5zZXRDdXN0b21Qcm9wZXJ0eShTY2FsZVByb3BlcnR5S2V5LCBgJHthY3R1YWxTY2FsZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXRoQXJyYXlQYXJhbXMgPSBuZXdQYXJhbXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXNpZ24uYWJvcnRPcGVyYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBvcGVyYXRpb25TdWNjZXNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQYXRoQXhpcyhwYXRoQXhpcykge1xyXG4gICAgfVxyXG4gICAgdXBkYXRlTm9ybWFsQXhpcyhub3JtYWxBeGlzKSB7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVTY2FsZShuZXdTY2FsZSkge1xyXG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsICYmIHRoaXMuY29tcG9uZW50cy5sZW5ndGggJiYgdGhpcy5wYXRoLmxlbmd0aCAmJiB0aGlzLnBhdGhBcnJheVBhcmFtcyAmJiBuZXdTY2FsZSAhPT0gdGhpcy5wYXRoQXJyYXlQYXJhbXMuc2NhbGUudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGRlc2lnbi5zdGFydE9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UGFyYW1zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLnBhdGhBcnJheVBhcmFtcyksIHsgc2NhbGU6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wYXRoQXJyYXlQYXJhbXMuc2NhbGUpLCB7IHZhbHVlOiBuZXdTY2FsZSB9KSB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvblN1Y2Nlc3MgPSB5aWVsZCB0aGlzLmRvT3BlcmF0aW9uKG5ld1BhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlc2lnbi5jb21taXRPcGVyYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnNldEN1c3RvbVByb3BlcnR5KFNjYWxlUHJvcGVydHlLZXksIGAke25ld1NjYWxlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF0aEFycmF5UGFyYW1zID0gbmV3UGFyYW1zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVzaWduLmFib3J0T3BlcmF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3BlcmF0aW9uU3VjY2VzcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgb25Ub29sQWN0aXZlKCkge1xyXG4gICAgICAgIC8vIGNvbnN0IHNlbGVjdGlvbiA9IGFwcC5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAvLyBjb25zdCB0b29sSGVscGVyID0gYXBwLmdldFRvb2xIZWxwZXIoKTtcclxuICAgICAgICAvLyB0b29sSGVscGVyLmVuYWJsZVBpY2tpbmcodHJ1ZSk7XHJcbiAgICAgICAgLy8gdG9vbEhlbHBlci5zZXREZWZhdWx0U2VsZWN0QmVoYXZpb3IoS1NlbGVjdEJlaGF2aW9yLkFERCk7XHJcbiAgICAgICAgLy8gY29uc3QgYWxsRW50aXRpZXMgPSBzZWxlY3Rpb24uZ2V0QWxsRW50aXRpZXMoKTtcclxuICAgICAgICAvLyBpZiAoYWxsRW50aXRpZXMubGVuZ3RoID09PSAxICYmIChpc0tHcm91cEluc3RhbmNlKGFsbEVudGl0aWVzWzBdKSB8fCBpc0tGYWNlKGFsbEVudGl0aWVzWzBdKSkpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5tb2RlbCA9IGFsbEVudGl0aWVzWzBdO1xyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIHNlbGVjdGlvbi5jbGVhcigpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBzZWxlY3Rpb24uYWRkT2JzZXJ2ZXIoeyBvblNlbGVjdGlvbkNoYW5nZTogdGhpcy5zZWxlY3Rpb25PYnNlcnZlciB9KTtcclxuICAgIH1cclxuICAgIC8vIHByaXZhdGUgc2VsZWN0aW9uT2JzZXJ2ZXIgPSAoKSA9PiB7XHJcbiAgICAvLyAgICAgY29uc3Qgc2VsZWN0aW9uID0gYXBwLmdldFNlbGVjdGlvbigpO1xyXG4gICAgLy8gICAgIHNlbGVjdGlvbi5cclxuICAgIC8vICAgICBjb25zdCBhbGxFbnRpdGllcyA9IHNlbGVjdGlvbi5nZXRBbGxFbnRpdGllcygpO1xyXG4gICAgLy8gICAgIGlmICh0aGlzLm1vZGVsKSB7XHJcbiAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9XHJcbiAgICBvblRvb2xEZWFjdGl2ZSgpIHtcclxuICAgICAgICAvLyBjb25zdCBwbHVnaW5VSSA9IGFwcC5nZXRQbHVnaW5VSSgpO1xyXG4gICAgICAgIC8vIHRoaXMudHJ5Q29tbWl0KCk7XHJcbiAgICAgICAgLy8gcGx1Z2luVUkucG9zdE1lc3NhZ2UoeyB0eXBlOiAnZGVBY3RpdmF0ZVBhdGhBcnJheScgfSwgJyonKTtcclxuICAgIH1cclxuICAgIG9uTW91c2VNb3ZlKGV2ZW50LCBpbmZlcmVuY2VSZXN1bHQpIHtcclxuICAgICAgICA7XHJcbiAgICB9XHJcbiAgICBvbkxCdXR0b25VcChldmVudCwgaW5mZXJlbmNlUmVzdWx0KSB7XHJcbiAgICB9XHJcbiAgICBvblJCdXR0b25VcChldmVudCwgaW5mZXJlbmNlUmVzdWx0KSB7XHJcbiAgICAgICAgYXBwLmRlYWN0aXZhdGVDdXN0b21Ub29sKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgb25MQnV0dG9uRGJDbGljayhldmVudCwgaW5mZXJlbmNlUmVzdWx0KSB7XHJcbiAgICAgICAgO1xyXG4gICAgfVxyXG4gICAgYWxsb3dVc2luZ0luZmVyZW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBvbktleURvd24oZXZlbnQpIHtcclxuICAgICAgICA7XHJcbiAgICB9XHJcbiAgICBvbktleVVwKGV2ZW50KSB7XHJcbiAgICAgICAgO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydCBjb25zdCBwYXRoQXJyYXlQYXJhbXNFZGl0VG9vbCA9IG5ldyBQYXRoQXJyYXlQYXJhbXNFZGl0VG9vbCgpO1xyXG4iLCJpbXBvcnQgeyBDb21wb25lbnRQcm9wZXJ0eUtleSwgQ291bnRQcm9wZXJ0eUtleSwgRGVmYXVsdFBhdGhBcnJheVBhcmFtcywgSW50ZXJ2YWxQcm9wZXJ0eUtleSwgTm9ybWFsQXhpc1Byb3BlcnR5S2V5LCBQYXRoQXhpc1Byb3BlcnR5S2V5LCBQYXRoRGVsaW1pdGVyLCBQYXRoTGlzdFByb3BlcnR5S2V5LCBQYXRoUmV2ZXJzZWREZWxpbWl0ZXIsIFNjYWxlUHJvcGVydHlLZXkgfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBib3VuZGVkQ3VydmVDb25uZWN0aW9uRGV0ZWN0LCBnZW5lcmF0ZVBhdGhQb3NlcywgZ2V0Qm91bmRpbmdCb3hTaXplSW5Xb3JsZCwgZ2V0VHJhbnNmb3JtRnJvbVBhdGhQb2ludFBvc2VzLCBpc0tBdXhpbGlhcnlCb3VuZGVkQ3VydmUsIGlzS0ZhY2UsIGlzS0dyb3VwSW5zdGFuY2UgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5leHBvcnQgY2xhc3MgUGF0aEFycmF5VG9vbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnBhdGggPSBbXTtcclxuICAgICAgICB0aGlzLnBhdGhQb2ludFBvc2VzID0gW107XHJcbiAgICAgICAgdGhpcy50b3RhbExlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5wYXRoQXJyYXlQYXJhbXMgPSBEZWZhdWx0UGF0aEFycmF5UGFyYW1zO1xyXG4gICAgfVxyXG4gICAgb25Ub29sQWN0aXZlKCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGFwcC5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICBjb25zdCB0b29sSGVscGVyID0gYXBwLmdldFRvb2xIZWxwZXIoKTtcclxuICAgICAgICB0b29sSGVscGVyLmVuYWJsZVBpY2tpbmcodHJ1ZSk7XHJcbiAgICAgICAgdG9vbEhlbHBlci5zZXREZWZhdWx0U2VsZWN0QmVoYXZpb3IoS1NlbGVjdEJlaGF2aW9yLkFERCk7XHJcbiAgICAgICAgY29uc3QgYWxsRW50aXRpZXMgPSBzZWxlY3Rpb24uZ2V0QWxsRW50aXRpZXMoKTtcclxuICAgICAgICBpZiAoYWxsRW50aXRpZXMubGVuZ3RoID09PSAxICYmIChpc0tHcm91cEluc3RhbmNlKGFsbEVudGl0aWVzWzBdKSB8fCBpc0tGYWNlKGFsbEVudGl0aWVzWzBdKSkpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbCA9IGFsbEVudGl0aWVzWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZWN0aW9uLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNlbGVjdGlvbi5hZGRPYnNlcnZlcih7IG9uU2VsZWN0aW9uQ2hhbmdlOiB0aGlzLnNlbGVjdGlvbk9ic2VydmVyIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gcHJpdmF0ZSBzZWxlY3Rpb25PYnNlcnZlciA9ICgpID0+IHtcclxuICAgIC8vICAgICBjb25zdCBzZWxlY3Rpb24gPSBhcHAuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAvLyAgICAgc2VsZWN0aW9uLlxyXG4gICAgLy8gICAgIGNvbnN0IGFsbEVudGl0aWVzID0gc2VsZWN0aW9uLmdldEFsbEVudGl0aWVzKCk7XHJcbiAgICAvLyAgICAgaWYgKHRoaXMubW9kZWwpIHtcclxuICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxuICAgIG9uVG9vbERlYWN0aXZlKCkge1xyXG4gICAgICAgIGNvbnN0IHBsdWdpblVJID0gYXBwLmdldFBsdWdpblVJKCk7XHJcbiAgICAgICAgdGhpcy50cnlDb21taXQoKTtcclxuICAgICAgICBwbHVnaW5VSS5wb3N0TWVzc2FnZSh7IHR5cGU6ICdsZWF2ZVBhdGhBcnJheVRvb2wnIH0sICcqJyk7XHJcbiAgICB9XHJcbiAgICBvbk1vdXNlTW92ZShldmVudCwgaW5mZXJlbmNlUmVzdWx0KSB7XHJcbiAgICAgICAgO1xyXG4gICAgfVxyXG4gICAgb25MQnV0dG9uVXAoZXZlbnQsIGluZmVyZW5jZVJlc3VsdCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGFwcC5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICBjb25zdCBwaWNrSGVscGVyID0gYXBwLmdldFBpY2tIZWxwZXIoKTtcclxuICAgICAgICAvLyBjb25zdCBwaWNrYWJsZUVudGl0eVR5cGUgPSB0aGlzLm1vZGVsID8gW0tFbnRpdHlUeXBlLkF1eGlsaWFyeUJvdW5kZWRDdXJ2ZV0gOiBbS0FwcEVudGl0eVR5cGUuR3JvdXBJbnN0YW5jZSwgS0VudGl0eVR5cGUuRmFjZV07XHJcbiAgICAgICAgY29uc3QgYWxsUGlja2VkRW50aXRpZXMgPSBwaWNrSGVscGVyLnBpY2tCeVBvaW50KGV2ZW50LmNsaWVudFgoKSwgZXZlbnQuY2xpZW50WSgpKS5nZXRBbGxQaWNrZWQoKTtcclxuICAgICAgICBpZiAoYWxsUGlja2VkRW50aXRpZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaXNWYWxpZFBhdGggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0tBdXhpbGlhcnlCb3VuZGVkQ3VydmUoYWxsUGlja2VkRW50aXRpZXNbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV4aWxpYXJ5Qm91bmRlZEN1cnZlID0gYWxsUGlja2VkRW50aXRpZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGRpc2NyZXRlUmVzdWx0OiBEaXNjcmV0ZVJlc3VsdCA9IHsgZGlzY3JldGVQb2ludHM6IFtdLCBsZW5ndGg6IDAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXRoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGF0aCA9IHRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXRoRW5kVmVydGV4ID0gbGFzdFBhdGgucmV2ZXJzZWQgPyBsYXN0UGF0aC5jdXJ2ZS5nZXRTdGFydFZlcnRleCgpIDogbGFzdFBhdGguY3VydmUuZ2V0RW5kVmVydGV4KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb25uZWN0aW9uUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXRoLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvblJlc3VsdCA9IGJvdW5kZWRDdXJ2ZUNvbm5lY3Rpb25EZXRlY3QocGF0aEVuZFZlcnRleCwgYXV4aWxpYXJ5Qm91bmRlZEN1cnZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29ubmVjdGlvblJlc3VsdC5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoRW5kVmVydGV4ID0gbGFzdFBhdGguY3VydmUuZ2V0U3RhcnRWZXJ0ZXgoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9uUmVzdWx0ID0gYm91bmRlZEN1cnZlQ29ubmVjdGlvbkRldGVjdChwYXRoRW5kVmVydGV4LCBhdXhpbGlhcnlCb3VuZGVkQ3VydmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uZWN0aW9uUmVzdWx0LmNvbm5lY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGF0aC5yZXZlcnNlZCA9ICFsYXN0UGF0aC5yZXZlcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGFzdFBhdGguZGlzY3JldGVQb2ludHMucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnBhdGgucHVzaCh7IGN1cnZlOiBhdXhpbGlhcnlCb3VuZGVkQ3VydmUsIHJldmVyc2VkOiBjb25uZWN0aW9uLnJldmVyc2VkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAvLyBzZWxlY3Rpb24uYWRkKFthbGxQaWNrZWRFbnRpdGllc1swXV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpc1ZhbGlkUGF0aCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvblJlc3VsdCA9IGJvdW5kZWRDdXJ2ZUNvbm5lY3Rpb25EZXRlY3QocGF0aEVuZFZlcnRleCwgYXV4aWxpYXJ5Qm91bmRlZEN1cnZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubmVjdGlvblJlc3VsdC5jb25uZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc2NyZXRlUmVzdWx0ID0gZGlzY3JldGVBdXhpbGlhcnlCb3VuZGVkQ3VydmUoYXV4aWxpYXJ5Qm91bmRlZEN1cnZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIChjb25uZWN0aW9uUmVzdWx0LnJldmVyc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgZGlzY3JldGVSZXN1bHQuZGlzY3JldGVQb2ludHMucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXRoLnB1c2goeyBjdXJ2ZTogYXV4aWxpYXJ5Qm91bmRlZEN1cnZlLCByZXZlcnNlZDogY29ubmVjdGlvblJlc3VsdC5yZXZlcnNlZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdGlvbi5hZGQoW2FsbFBpY2tlZEVudGl0aWVzWzBdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkUGF0aCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpc2NyZXRlUmVzdWx0ID0gZGlzY3JldGVBdXhpbGlhcnlCb3VuZGVkQ3VydmUoYXV4aWxpYXJ5Qm91bmRlZEN1cnZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXRoLnB1c2goeyBjdXJ2ZTogYXV4aWxpYXJ5Qm91bmRlZEN1cnZlLCByZXZlcnNlZDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGVjdGlvbi5hZGQoW2FsbFBpY2tlZEVudGl0aWVzWzBdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzVmFsaWRQYXRoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZFBhdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24ucmVtb3ZlKGFsbFBpY2tlZEVudGl0aWVzLnNsaWNlKDEpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5yZW1vdmUoYWxsUGlja2VkRW50aXRpZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbCA9IGFsbFBpY2tlZEVudGl0aWVzWzBdO1xyXG4gICAgICAgICAgICAgICAgLy8gc2VsZWN0aW9uLmFkZChbYWxsUGlja2VkRW50aXRpZXNbMF1dKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50cnlDb21taXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0cnlDb21taXQoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XHJcbiAgICAgICAgaWYgKHRoaXMubW9kZWwgJiYgdGhpcy5wYXRoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBkZXNpZ24gPSBhcHAuZ2V0QWN0aXZlRGVzaWduKCk7XHJcbiAgICAgICAgICAgIGRlc2lnbi5zdGFydE9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgICBsZXQgY29tcG9uZW50O1xyXG4gICAgICAgICAgICBpZiAoaXNLR3JvdXBJbnN0YW5jZSh0aGlzLm1vZGVsKSkge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50ID0gdGhpcy5tb2RlbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpc0tGYWNlKHRoaXMubW9kZWwpKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQgPSAoX2EgPSBkZXNpZ24ubWFrZUdyb3VwKFt0aGlzLm1vZGVsXSwgW10sIFtdKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFkZGVkSW5zdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc3QgdG90YWxMZW5ndGggPSB0aGlzLnBhdGgucmVkdWNlPG51bWJlcj4oKGFjYywgcGF0aE9iamVjdCkgPT4geyBhY2MgKz0gcGF0aE9iamVjdC5sZW5ndGg7IHJldHVybiBhY2MgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGhQb2ludFBvc2VzLCB0b3RhbExlbmd0aCB9ID0gdGhpcy5wYXRoUG9pbnRQb3Nlcy5sZW5ndGggPyB7IHBhdGhQb2ludFBvc2VzOiB0aGlzLnBhdGhQb2ludFBvc2VzLCB0b3RhbExlbmd0aDogdGhpcy50b3RhbExlbmd0aCB9IDogZ2VuZXJhdGVQYXRoUG9zZXModGhpcy5wYXRoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGF0aFBvaW50UG9zZXMgPSBwYXRoUG9pbnRQb3NlcztcclxuICAgICAgICAgICAgICAgIHRoaXMudG90YWxMZW5ndGggPSB0b3RhbExlbmd0aDtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IGNvbXBvbmVudFRyYW5zZm9ybXM6IEtNYXRyaXg0W10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbY29tcG9uZW50XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9tYXRpY0ludGVydmFsID0gdG90YWxMZW5ndGggLyAodGhpcy5wYXRoQXJyYXlQYXJhbXMuY291bnQudmFsdWUgLSAxKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmxkU2l6ZSA9IGdldEJvdW5kaW5nQm94U2l6ZUluV29ybGQoY29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gd29ybGRTaXplWzBdID4gKGF1dG9tYXRpY0ludGVydmFsIC8gMikgPyAoYXV0b21hdGljSW50ZXJ2YWwgLyAyIC8gd29ybGRTaXplWzBdKSA6IDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnRMb2NhbEJvdW5kaW5nQm94ID0gY29tcG9uZW50LmdldExvY2FsQm91bmRpbmdCb3goKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFRyYW5zZm9ybSA9IGNvbXBvbmVudC5nZXRUcmFuc2Zvcm0oKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnN0IGV4dGVuZGVkVHJhbnNmb3JtID0gZ2V0RXh0ZW5kZWRUcmFuc2Zvcm0oKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFBvc2l0aW9uID0gY29tcG9uZW50TG9jYWxCb3VuZGluZ0JveC5jZW50ZXI7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNldE1hdHJpeCA9IEdlb21MaWIuY3JlYXRlVHJhbnNsYXRpb25NYXRyaXg0KC1jb21wb25lbnRQb3NpdGlvbi54LCAtY29tcG9uZW50UG9zaXRpb24ueSwgLWNvbXBvbmVudFBvc2l0aW9uLnopXHJcbiAgICAgICAgICAgICAgICAgICAgLm11bHRpcGxpZWQoY29tcG9uZW50VHJhbnNmb3JtLmludmVyc2VkKCkpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc3Qgc2NhbGVNYXRyaXggPSBHZW9tTGliLmNyZWF0ZVNjYWxlTWF0cml4NChzY2FsZSwgc2NhbGUsIHNjYWxlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhdGhBcnJheVBhcmFtcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wYXRoQXJyYXlQYXJhbXMpLCB7IGludGVydmFsOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMucGF0aEFycmF5UGFyYW1zLmludGVydmFsKSwgeyB2YWx1ZTogYXV0b21hdGljSW50ZXJ2YWwgfSksIHNjYWxlOiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMucGF0aEFycmF5UGFyYW1zLnNjYWxlKSwgeyB2YWx1ZTogc2NhbGUgfSkgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wb25lbnRUcmFuc2Zvcm1zID0gZ2V0VHJhbnNmb3JtRnJvbVBhdGhQb2ludFBvc2VzKHRoaXMucGF0aFBvaW50UG9zZXMsIG5ld1BhdGhBcnJheVBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3BlcmF0aW9uU3VjY2VzcyA9IGRlc2lnbi50cmFuc2Zvcm1Hcm91cEluc3RhbmNlcyhbY29tcG9uZW50XSwgY29tcG9uZW50VHJhbnNmb3Jtc1swXS5tdWx0aXBsaWVkKHJlc2V0TWF0cml4KSkuaXNTdWNjZXNzO1xyXG4gICAgICAgICAgICAgICAgLy8gR2VvbUxpYi5jcmVhdGVUcmFuc2xhdGlvbk1hdHJpeDQoY29tcG9uZW50UG9zaXRpb25zWzBdLnggLSBjdXJyZW50Q29tcG9uZW50UG9zaXRpb24ueCwgY29tcG9uZW50UG9zaXRpb25zWzBdLnkgLSBjdXJyZW50Q29tcG9uZW50UG9zaXRpb24ueSwgY29tcG9uZW50UG9zaXRpb25zWzBdLnogLSBjdXJyZW50Q29tcG9uZW50UG9zaXRpb24ueilcclxuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRpb25TdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGNvbXBvbmVudFRyYW5zZm9ybXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VUcmFuc2Zvcm1JbnZlcnNlID0gY29tcG9uZW50VHJhbnNmb3Jtc1swXS5pbnZlcnNlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbXBvbmVudHMgPSAoX2IgPSBkZXNpZ24uYnVsa0NvcHlHcm91cEluc3RhbmNlcyhbY29tcG9uZW50XSwgW2NvbXBvbmVudFRyYW5zZm9ybXMuc2xpY2UoMSkubWFwKG1hdHJpeCA9PiBtYXRyaXgubXVsdGlwbGllZChiYXNlVHJhbnNmb3JtSW52ZXJzZSkpXSkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5hZGRlZEluc3RhbmNlcztcclxuICAgICAgICAgICAgICAgICAgICAvLyBbY29tcG9uZW50UG9zaXRpb25zLnNsaWNlKDEpLm1hcChwb3NpdGlvbiA9PiBHZW9tTGliLmNyZWF0ZVRyYW5zbGF0aW9uTWF0cml4NChwb3NpdGlvbi54IC0gY29tcG9uZW50UG9zaXRpb25zWzBdLngsIHBvc2l0aW9uLnkgLSBjb21wb25lbnRQb3NpdGlvbnNbMF0ueSwgcG9zaXRpb24ueiAtIGNvbXBvbmVudFBvc2l0aW9uc1swXS56KSldXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0NvbXBvbmVudHMgPT09IG51bGwgfHwgbmV3Q29tcG9uZW50cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmV3Q29tcG9uZW50cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50cy5wdXNoKC4uLm5ld0NvbXBvbmVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY29tcG9uZW50cy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvblN1Y2Nlc3MgPSBvcGVyYXRpb25TdWNjZXNzICYmIGNvbXBvbmVudHNbaW5kZXhdLnNldEN1c3RvbVByb3BlcnR5KENvbXBvbmVudFByb3BlcnR5S2V5LCBgJHtpbmRleH1gKS5pc1N1Y2Nlc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50R3JvdXBJbnN0YW5jZSA9IChfYyA9IGRlc2lnbi5tYWtlR3JvdXAoW10sIGNvbXBvbmVudHMsIHRoaXMucGF0aC5tYXAocGF0aE9iamVjdCA9PiBwYXRoT2JqZWN0LmN1cnZlKSkpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5hZGRlZEluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50R3JvdXBJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0aENvdW50ID0gdGhpcy5wYXRoLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvblN1Y2Nlc3MgPSBvcGVyYXRpb25TdWNjZXNzICYmIHBhcmVudEdyb3VwSW5zdGFuY2Uuc2V0Q3VzdG9tUHJvcGVydHkoSW50ZXJ2YWxQcm9wZXJ0eUtleSwgYCR7YXV0b21hdGljSW50ZXJ2YWx9YCkuaXNTdWNjZXNzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uU3VjY2VzcyA9IG9wZXJhdGlvblN1Y2Nlc3MgJiYgcGFyZW50R3JvdXBJbnN0YW5jZS5zZXRDdXN0b21Qcm9wZXJ0eShDb3VudFByb3BlcnR5S2V5LCBgJHt0aGlzLnBhdGhBcnJheVBhcmFtcy5jb3VudC52YWx1ZX1gKS5pc1N1Y2Nlc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25TdWNjZXNzID0gb3BlcmF0aW9uU3VjY2VzcyAmJiBwYXJlbnRHcm91cEluc3RhbmNlLnNldEN1c3RvbVByb3BlcnR5KFBhdGhBeGlzUHJvcGVydHlLZXksIGAke3RoaXMucGF0aEFycmF5UGFyYW1zLnBhdGhBeGlzfWApLmlzU3VjY2VzcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvblN1Y2Nlc3MgPSBvcGVyYXRpb25TdWNjZXNzICYmIHBhcmVudEdyb3VwSW5zdGFuY2Uuc2V0Q3VzdG9tUHJvcGVydHkoTm9ybWFsQXhpc1Byb3BlcnR5S2V5LCBgJHt0aGlzLnBhdGhBcnJheVBhcmFtcy5ub3JtYWxBeGlzfWApLmlzU3VjY2VzcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvblN1Y2Nlc3MgPSBvcGVyYXRpb25TdWNjZXNzICYmIHBhcmVudEdyb3VwSW5zdGFuY2Uuc2V0Q3VzdG9tUHJvcGVydHkoU2NhbGVQcm9wZXJ0eUtleSwgYCR7c2NhbGV9YCkuaXNTdWNjZXNzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uU3VjY2VzcyA9IG9wZXJhdGlvblN1Y2Nlc3MgJiYgcGFyZW50R3JvdXBJbnN0YW5jZS5zZXRDdXN0b21Qcm9wZXJ0eShQYXRoTGlzdFByb3BlcnR5S2V5LCB0aGlzLnBhdGgucmVkdWNlKChhY2MsIHBhdGhPYmplY3QsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjICs9IGAke3BhdGhPYmplY3QuY3VydmUuZ2V0S2V5KCl9JHtQYXRoUmV2ZXJzZWREZWxpbWl0ZXJ9JHtwYXRoT2JqZWN0LnJldmVyc2VkID8gMSA6IDB9YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBwYXRoQ291bnQgLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjYyArPSBgJHtQYXRoRGVsaW1pdGVyfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAnJykpLmlzU3VjY2VzcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGFwcC5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbi5jbGVhcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uLmFkZChbcGFyZW50R3JvdXBJbnN0YW5jZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvblN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdGhBcnJheVBhcmFtcyA9IG5ld1BhdGhBcnJheVBhcmFtcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNpZ24uY29tbWl0T3BlcmF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNpZ24uYWJvcnRPcGVyYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2lnbi5hYm9ydE9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNpZ24uYWJvcnRPcGVyYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXBwLmRlYWN0aXZhdGVDdXN0b21Ub29sKHRoaXMsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRlc2lnbi5hYm9ydE9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gW107XHJcbiAgICAgICAgdGhpcy5wYXRoUG9pbnRQb3NlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMudG90YWxMZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMucGF0aEFycmF5UGFyYW1zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBEZWZhdWx0UGF0aEFycmF5UGFyYW1zKSwgeyBjb3VudDogdGhpcy5wYXRoQXJyYXlQYXJhbXMuY291bnQgfSk7XHJcbiAgICAgICAgLy8gdGhpcy5pbnRlcnZhbCA9IERlZmF1bHRJbnRlcnZhbDtcclxuICAgIH1cclxuICAgIG9uUkJ1dHRvblVwKGV2ZW50LCBpbmZlcmVuY2VSZXN1bHQpIHtcclxuICAgICAgICBhcHAuZGVhY3RpdmF0ZUN1c3RvbVRvb2wodGhpcyk7XHJcbiAgICB9XHJcbiAgICBvbkxCdXR0b25EYkNsaWNrKGV2ZW50LCBpbmZlcmVuY2VSZXN1bHQpIHtcclxuICAgICAgICA7XHJcbiAgICB9XHJcbiAgICBhbGxvd1VzaW5nSW5mZXJlbmNlKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIG9uS2V5RG93bihldmVudCkge1xyXG4gICAgICAgIDtcclxuICAgIH1cclxuICAgIG9uS2V5VXAoZXZlbnQpIHtcclxuICAgICAgICA7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0IGNvbnN0IHBhdGhBcnJheVRvb2wgPSBuZXcgUGF0aEFycmF5VG9vbCgpO1xyXG4iXSwibmFtZXMiOlsiYWN0aXZhdGVkQ3VzdG9tVG9vbCIsIkNvbXBvbmVudFByb3BlcnR5S2V5IiwiSW50ZXJ2YWxQcm9wZXJ0eUtleSIsIkNvdW50UHJvcGVydHlLZXkiLCJQYXRoQXhpc1Byb3BlcnR5S2V5IiwiTm9ybWFsQXhpc1Byb3BlcnR5S2V5IiwiU2NhbGVQcm9wZXJ0eUtleSIsIlBhdGhMaXN0UHJvcGVydHlLZXkiLCJpc0F4aXNWYWxpZCIsImF4aXMiLCJEZWZhdWx0UGF0aEFycmF5UGFyYW1zIiwiaW50ZXJ2YWwiLCJ2YWx1ZSIsIm1pbiIsIm1heCIsImNvdW50IiwicGF0aEF4aXMiLCJub3JtYWxBeGlzIiwic2NhbGUiLCJHZW9tTGliIiwiY3JlYXRlSWRlbnRpdHlNYXRyaXg0IiwiZHVtbXlWZWN0b3IzZCIsImNyZWF0ZVZlY3RvcjNkIiwiZHVtbXlQb2ludDNkIiwiY3JlYXRlUG9pbnQzZCIsImlzS0dyb3VwSW5zdGFuY2UiLCJlbnRpdHkiLCJnZXRUeXBlIiwiS0VudGl0eVR5cGUiLCJHcm91cEluc3RhbmNlIiwiaXNLRmFjZSIsIkZhY2UiLCJib3VuZGVkQ3VydmVDb25uZWN0aW9uRGV0ZWN0IiwiYXV4aWxpYXJ5VmVydGV4IiwiYXV4aWxpYXJ5Qm91bmRlZEN1cnZlIiwic3RhcnRWZXJ0ZXgiLCJnZXRTdGFydFZlcnRleCIsImVuZFZlcnRleCIsImdldEtleSIsImNvbm5lY3RlZCIsInJldmVyc2VkIiwiZ2VuZXJhdGVQYXRoUG9zZXMiLCJwYXRoIiwicHJldk5vcm1hbCIsInBhdGhQb2ludFBvc2VzIiwiYWNjdW11bGF0ZUxlbmd0aCIsImZpcnN0VmFsaWROb3JtYWwiLCJpIiwibGVuZ3RoIiwicGF0aE9iamVjdCIsImRpc2NyZXRlUG9pbnRzIiwiZGlzY3JldGVBdXhpbGlhcnlCb3VuZGVkQ3VydmUiLCJib3VuZGVkQ3VydmUiLCJnZXRCb3VuZGVkQ3VydmUiLCJkaXJlY3Rpb24iLCJzdGFydFBvaW50IiwiZW5kUG9pbnQiLCJjaXJjbGUiLCJnZXRBcHByb3hpbWF0ZVBvaW50c0J5QW5nbGUiLCJjdXJ2ZSIsIm5vcm1hbCIsImdldEF1eGlsaWFyeUJvdW5kZWRDdXJ2ZU5vcm1hbCIsImoiLCJkaXNjcmV0ZVBvaW50IiwibmV4dERpc2NyZXRlUG9pbnQiLCJwdXNoIiwicG9pbnQiLCJzdWJ0cmFjdGVkIiwibm9ybWFsaXplZCIsInByZXZEaXNjcmV0ZVBvaW50IiwiZGlzdGFuY2VUbyIsInBhdGhQb2ludFBvc2UiLCJ0b3RhbExlbmd0aCIsImdldFRyYW5zZm9ybUZyb21QYXRoUG9pbnRQb3NlcyIsInBhcmFtcyIsImNvbXBvbmVudFRyYW5zZm9ybXMiLCJzY2FsZU1hdHJpeCIsImNyZWF0ZVNjYWxlTWF0cml4NCIsImNvbXBvbmVudEluZGV4IiwiY29tcG9uZW50UG9zaXRpb25MZW5ndGgiLCJrIiwiY29tcG9uZW50VHJhbnNmb3JtIiwicHJldkFjY3VtdWxhdGVMZW5ndGgiLCJwYXRoTm9ybWFsIiwiY29tcG9uZW50UG9zaXRpb24iLCJhZGRlZCIsIm11bHRpcGxpZWQiLCJjcmVhdGVUcmFuc2xhdGlvbk1hdHJpeDQiLCJ4IiwieSIsInoiLCJjcmVhdGVBbGlnbkNDU01hdHJpeDQiLCJjcm9zcyIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwiYWRvcHQiLCJ0aGVuIiwiYXBwbHkiLCJkZXNpZ24iLCJhcHAiLCJnZXRBY3RpdmVEZXNpZ24iLCJwYXRoQXJyYXlQYXJhbXNFZGl0VG9vbCIsImNvbnN0cnVjdG9yIiwiY29tcG9uZW50cyIsInBhdGhBcnJheVBhcmFtcyIsImdldFBhdGhBcnJheVBhcmFtcyIsInNldE1vZGVsIiwibW9kZWwiLCJfYSIsImdldEdyb3VwRGVmaW5pdGlvbiIsImdldFN1Ykdyb3VwSW5zdGFuY2VzIiwicmVkdWNlIiwiYWNjIiwiaW5zdGFuY2UiLCJpbmRleCIsIk51bWJlciIsInBhcnNlSW50IiwiZ2V0Q3VzdG9tUHJvcGVydHkiLCJpc0Zpbml0ZSIsInNvcnQiLCJhIiwiYiIsImludGVydmFsUHJvcGVydHkiLCJpbnRlcnZhbExvY2tlZCIsInN0YXJ0c1dpdGgiLCJwYXJzZUZsb2F0Iiwic2xpY2UiLCJwYXRoQXhpc1Byb3BlcnR5Iiwibm9ybWFsQXhpc1Byb3BlcnR5Iiwic2NhbGVQcm9wZXJ0eSIsInNjYWxlTG9ja2VkIiwicGF0aExpc3RQcm9wZXJ0eSIsImF1eGlsaWFyeUJvdW5kZWRDdXJ2ZU1hcCIsIk1hcCIsInBhdGhWYWxpZCIsInBhdGhTdHIiLCJzcGxpdCIsInNwbGl0UmVzdWx0IiwiZ2V0IiwiTWF0aCIsImZsb29yIiwiY2xlYXJNb2RlbCIsInVuZGVmaW5lZCIsImRvT3BlcmF0aW9uIiwibmVlZFRyYW5zZm9ybSIsIm9wZXJhdGlvblN1Y2Nlc3MiLCJhY3RpdmF0ZUdyb3VwSW5zdGFuY2UiLCJpc1N1Y2Nlc3MiLCJjb21wb25lbnQiLCJnZXRUcmFuc2Zvcm0iLCJjb21wb25lbnRMb2NhbEJvdW5kaW5nQm94IiwiZ2V0TG9jYWxCb3VuZGluZ0JveCIsImNlbnRlciIsInJlc2V0TWF0cml4IiwiaW52ZXJzZWQiLCJ0cmFuc2Zvcm1SZXN1bHQiLCJ0cmFuc2Zvcm1Hcm91cEluc3RhbmNlcyIsImNvbXBvbmVudEluc3RhbmNlIiwiYmFzZVRyYW5zZm9ybUludmVyc2UiLCJuZXdHcm91cEluc3RhbmNlcyIsImJ1bGtDb3B5R3JvdXBJbnN0YW5jZXMiLCJtYXAiLCJtYXRyaXgiLCJhZGRlZEluc3RhbmNlcyIsInNldEN1c3RvbVByb3BlcnR5IiwiZmluZEluZGV4IiwidG9EZWxldGVDb21wb25lbnQiLCJyZW1vdmVHcm91cEluc3RhbmNlIiwic3BsaWNlIiwiZGVhY3RpdmF0ZUdyb3VwSW5zdGFuY2UiLCJ1cGRhdGVJbnRlcnZhbCIsIm5ld0ludGVydmFsIiwibmV3Q291bnQiLCJuZWVkTmV3Q291bnQiLCJhY3R1YWxTY2FsZSIsIndpZHRoIiwic3RhcnRPcGVyYXRpb24iLCJuZXdQYXJhbXMiLCJPYmplY3QiLCJhc3NpZ24iLCJjb21taXRPcGVyYXRpb24iLCJhYm9ydE9wZXJhdGlvbiIsInVwZGF0ZUNvdW50IiwibmVlZE5ld0ludGVydmFsIiwiYWN0dWFsSW50ZXJ2YWwiLCJuZWVkTmV3U2NhbGUiLCJ1cGRhdGVQYXRoQXhpcyIsInVwZGF0ZU5vcm1hbEF4aXMiLCJ1cGRhdGVTY2FsZSIsIm5ld1NjYWxlIiwib25Ub29sQWN0aXZlIiwib25Ub29sRGVhY3RpdmUiLCJvbk1vdXNlTW92ZSIsImV2ZW50IiwiaW5mZXJlbmNlUmVzdWx0Iiwib25MQnV0dG9uVXAiLCJvblJCdXR0b25VcCIsImRlYWN0aXZhdGVDdXN0b21Ub29sIiwib25MQnV0dG9uRGJDbGljayIsImFsbG93VXNpbmdJbmZlcmVuY2UiLCJvbktleURvd24iLCJvbktleVVwIiwicGF0aEFycmF5VG9vbCIsInNlbGVjdGlvbiIsImdldFNlbGVjdGlvbiIsInRvb2xIZWxwZXIiLCJnZXRUb29sSGVscGVyIiwiZW5hYmxlUGlja2luZyIsInNldERlZmF1bHRTZWxlY3RCZWhhdmlvciIsIktTZWxlY3RCZWhhdmlvciIsIkFERCIsImFsbEVudGl0aWVzIiwiZ2V0QWxsRW50aXRpZXMiLCJjbGVhciIsInBsdWdpblVJIiwiZ2V0UGx1Z2luVUkiLCJ0cnlDb21taXQiLCJwb3N0TWVzc2FnZSIsInR5cGUiLCJhbGxQaWNrZWRFbnRpdGllcyIsInBpY2tIZWxwZXIiLCJnZXRQaWNrSGVscGVyIiwicGlja0J5UG9pbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsImdldEFsbFBpY2tlZCIsImlzVmFsaWRQYXRoIiwiQXV4aWxpYXJ5Qm91bmRlZEN1cnZlIiwiY29ubmVjdGlvblJlc3VsdCIsImxhc3RQYXRoIiwicGF0aEVuZFZlcnRleCIsImdldEVuZFZlcnRleCIsInJlbW92ZSIsIl9iIiwiX2MiLCJtYWtlR3JvdXAiLCJhZGRlZEluc3RhbmNlIiwiYXV0b21hdGljSW50ZXJ2YWwiLCJ3b3JsZFNpemUiLCJnZXRCb3VuZGluZ0JveFNpemVJbldvcmxkIiwiZ3JvdXBJbnN0YW5jZSIsImxvY2FsQm91bmRpbmdCb3giLCJ0cmFuc2Zvcm0iLCJvbGRTaXplIiwiaGVpZ2h0IiwiZGVwdGgiLCJ2ZWMiLCJhcHBsaWVkTWF0cml4NCIsIm5ld1BhdGhBcnJheVBhcmFtcyIsIm5ld0NvbXBvbmVudHMiLCJwYXJlbnRHcm91cEluc3RhbmNlIiwicGF0aENvdW50IiwiYWRkIiwicmVzaXplIiwibW91bnQiLCJvbk1lc3NhZ2UiLCJkYXRhIiwiYWN0aXZhdGVDdXN0b21Ub29sIiwicGFyYW1zQ2hhbmdlUmVzdWx0Iiwic3VidHlwZSIsImVycm9yIiwiY29uc29sZSIsImNsb3NlUGx1Z2luIiwiYWRkT2JzZXJ2ZXIiLCJvblNlbGVjdGlvbkNoYW5nZSJdLCJzb3VyY2VSb290IjoiIn0=